{"version":3,"file":"cal-heatmap.umd.js","sources":["src/cal-heatmap.js"],"sourcesContent":["import * as d3 from \"d3\";\n\nexport default class {\n    constructor() {\n        \"use strict\";\n\n        var self = this;\n\n        this.allowedDataType = [\"json\", \"csv\", \"tsv\", \"txt\"];\n\n        // Default settings\n        this.options = {\n            // selector string of the container to append the graph to\n            // Accept any string value accepted by document.querySelector or CSS3\n            // or an Element object\n            itemSelector: \"#cal-heatmap\",\n\n            // Whether to paint the calendar on init()\n            // Used by testsuite to reduce testing time\n            paintOnLoad: true,\n\n            // ================================================\n            // DOMAIN\n            // ================================================\n\n            // Number of domain to display on the graph\n            range: 12,\n\n            // Size of each cell, in pixel\n            cellSize: 10,\n\n            // Padding between each cell, in pixel\n            cellPadding: 2,\n\n            // For rounded subdomain rectangles, in pixels\n            cellRadius: 0,\n\n            domainGutter: 2,\n\n            domainMargin: [0, 0, 0, 0],\n\n            domain: \"hour\",\n\n            subDomain: \"min\",\n\n            // Number of columns to split the subDomains to\n            // If not null, will takes precedence over rowLimit\n            colLimit: null,\n\n            // Number of rows to split the subDomains to\n            // Will be ignored if colLimit is not null\n            rowLimit: null,\n\n            // First day of the week is Monday\n            // 0 to start the week on Sunday\n            weekStartOnMonday: true,\n\n            // Start date of the graph\n            // @default now\n            start: new Date(),\n\n            minDate: null,\n\n            maxDate: null,\n\n            // ================================================\n            // DATA\n            // ================================================\n\n            // Data source\n            // URL, where to fetch the original datas\n            data: \"\",\n\n            // Data type\n            // Default: json\n            dataType: this.allowedDataType[0],\n\n            // Payload sent when using POST http method\n            // Leave to null (default) for GET request\n            // Expect a string, formatted like \"a=b;c=d\"\n            dataPostPayload: null,\n\n            // Whether to consider missing date:value from the datasource\n            // as equal to 0, or just leave them as missing\n            considerMissingDataAsZero: false,\n\n            // Load remote data on calendar creation\n            // When false, the calendar will be left empty\n            loadOnInit: true,\n\n            // Calendar orientation\n            // false: display domains side by side\n            // true : display domains one under the other\n            verticalOrientation: false,\n\n            // Domain dynamic width/height\n            // The width on a domain depends on the number of\n            domainDynamicDimension: true,\n\n            // Domain Label properties\n            label: {\n                // valid: top, right, bottom, left\n                position: \"bottom\",\n\n                // Valid: left, center, right\n                // Also valid are the direct svg values: start, middle, end\n                align: \"center\",\n\n                // By default, there is no margin/padding around the label\n                offset: {\n                    x: 0,\n                    y: 0\n                },\n\n                rotate: null,\n\n                // Used only on vertical orientation\n                width: 100,\n\n                // Used only on horizontal orientation\n                height: null\n            },\n\n            // ================================================\n            // LEGEND\n            // ================================================\n\n            // Threshold for the legend\n            legend: [10, 20, 30, 40],\n\n            // Whether to display the legend\n            displayLegend: true,\n\n            legendCellSize: 10,\n\n            legendCellPadding: 2,\n\n            legendMargin: [0, 0, 0, 0],\n\n            // Legend vertical position\n            // top: place legend above calendar\n            // bottom: place legend below the calendar\n            legendVerticalPosition: \"bottom\",\n\n            // Legend horizontal position\n            // accepted values: left, center, right\n            legendHorizontalPosition: \"left\",\n\n            // Legend rotation\n            // accepted values: horizontal, vertical\n            legendOrientation: \"horizontal\",\n\n            // Objects holding all the heatmap different colors\n            // null to disable, and use the default css styles\n            //\n            // Examples:\n            // legendColors: {\n            //\t\tmin: \"green\",\n            //\t\tmax: \"red\",\n            //\t\tempty: \"#ffffff\",\n            //\t\tbase: \"grey\",\n            //\t\toverflow: \"red\"\n            // }\n            legendColors: null,\n\n            // ================================================\n            // HIGHLIGHT\n            // ================================================\n\n            // List of dates to highlight\n            // Valid values:\n            // - []: don't highlight anything\n            // - \"now\": highlight the current date\n            // - an array of Date objects: highlight the specified dates\n            highlight: [],\n\n            // ================================================\n            // TEXT FORMATTING / i18n\n            // ================================================\n\n            // Name of the items to represent in the calendar\n            itemName: [\"item\", \"items\"],\n\n            // Formatting of the domain label\n            // @default: null, will use the formatting according to domain type\n            // Accept a string used as specifier by d3.timeFormat()\n            // or a function\n            //\n            // Refer to https://github.com/mbostock/d3/wiki/Time-Formatting\n            // for accepted date formatting used by d3.timeFormat()\n            domainLabelFormat: null,\n\n            // Formatting of the title displayed when hovering a subDomain cell\n            subDomainTitleFormat: {\n                empty: \"{date}\",\n                filled: \"{count} {name} {connector} {date}\"\n            },\n\n            // Formatting of the {date} used in subDomainTitleFormat\n            // @default: null, will use the formatting according to subDomain type\n            // Accept a string used as specifier by d3.timeFormat()\n            // or a function\n            //\n            // Refer to https://github.com/mbostock/d3/wiki/Time-Formatting\n            // for accepted date formatting used by d3.timeFormat()\n            subDomainDateFormat: null,\n\n            // Formatting of the text inside each subDomain cell\n            // @default: null, no text\n            // Accept a string used as specifier by d3.timeFormat()\n            // or a function\n            //\n            // Refer to https://github.com/mbostock/d3/wiki/Time-Formatting\n            // for accepted date formatting used by d3.timeFormat()\n            subDomainTextFormat: null,\n\n            // Formatting of the title displayed when hovering a legend cell\n            legendTitleFormat: {\n                lower: \"less than {min} {name}\",\n                inner: \"between {down} and {up} {name}\",\n                upper: \"more than {max} {name}\"\n            },\n\n            // Animation duration, in ms\n            animationDuration: 500,\n\n            nextSelector: false,\n\n            previousSelector: false,\n\n            itemNamespace: \"cal-heatmap\",\n\n            tooltip: false,\n\n            // ================================================\n            // EVENTS CALLBACK\n            // ================================================\n\n            // Callback when clicking on a time block\n            onClick: null,\n\n            // Callback after painting the empty calendar\n            // Can be used to trigger an API call, once the calendar is ready to be filled\n            afterLoad: null,\n\n            // Callback after loading the next domain in the calendar\n            afterLoadNextDomain: null,\n\n            // Callback after loading the previous domain in the calendar\n            afterLoadPreviousDomain: null,\n\n            // Callback after finishing all actions on the calendar\n            onComplete: null,\n\n            // Callback after fetching the datas, but before applying them to the calendar\n            // Used mainly to convert the datas if they're not formatted like expected\n            // Takes the fetched \"data\" object as argument, must return a json object\n            // formatted like {timestamp:count, timestamp2:count2},\n            afterLoadData(data) {\n                return data;\n            },\n\n            // Callback triggered after calling next().\n            // The `status` argument is equal to true if there is no\n            // more next domain to load\n            //\n            // This callback is also executed once, after calling previous(),\n            // only when the max domain is reached\n            onMaxDomainReached: null,\n\n            // Callback triggered after calling previous().\n            // The `status` argument is equal to true if there is no\n            // more previous domain to load\n            //\n            // This callback is also executed once, after calling next(),\n            // only when the min domain is reached\n            onMinDomainReached: null\n        };\n\n        this._domainType = {\n            \"min\": {\n                name: \"minute\",\n                level: 10,\n                maxItemNumber: 60,\n                defaultRowNumber: 10,\n                defaultColumnNumber: 6,\n                row(d) {\n                    return self.getSubDomainRowNumber(d);\n                },\n                column(d) {\n                    return self.getSubDomainColumnNumber(d);\n                },\n                position: {\n                    x(d) {\n                        return Math.floor(d.getMinutes() / self._domainType.min.row(d));\n                    },\n                    y(d) {\n                        return d.getMinutes() % self._domainType.min.row(d);\n                    }\n                },\n                format: {\n                    date: \"%H:%M, %A %B %-e, %Y\",\n                    legend: \"\",\n                    connector: \"at\"\n                },\n                extractUnit(d) {\n                    return new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes()).getTime();\n                }\n            },\n            \"hour\": {\n                name: \"hour\",\n                level: 20,\n                maxItemNumber(d) {\n                    switch (self.options.domain) {\n                        case \"day\":\n                            return 24;\n                        case \"week\":\n                            return 24 * 7;\n                        case \"month\":\n                            return 24 * (self.options.domainDynamicDimension ? self.getDayCountInMonth(d) : 31);\n                    }\n                },\n                defaultRowNumber: 6,\n                defaultColumnNumber(d) {\n                    switch (self.options.domain) {\n                        case \"day\":\n                            return 4;\n                        case \"week\":\n                            return 28;\n                        case \"month\":\n                            return self.options.domainDynamicDimension ? self.getDayCountInMonth(d) : 31;\n                    }\n                },\n                row(d) {\n                    return self.getSubDomainRowNumber(d);\n                },\n                column(d) {\n                    return self.getSubDomainColumnNumber(d);\n                },\n                position: {\n                    x(d) {\n                        if (self.options.domain === \"month\") {\n                            if (self.options.colLimit > 0 || self.options.rowLimit > 0) {\n                                return Math.floor((d.getHours() + (d.getDate() - 1) * 24) / self._domainType.hour.row(d));\n                            }\n                            return Math.floor(d.getHours() / self._domainType.hour.row(d)) + (d.getDate() - 1) * 4;\n                        } else if (self.options.domain === \"week\") {\n                            if (self.options.colLimit > 0 || self.options.rowLimit > 0) {\n                                return Math.floor((d.getHours() + self.getWeekDay(d) * 24) / self._domainType.hour.row(d));\n                            }\n                            return Math.floor(d.getHours() / self._domainType.hour.row(d)) + self.getWeekDay(d) * 4;\n                        }\n                        return Math.floor(d.getHours() / self._domainType.hour.row(d));\n                    },\n                    y(d) {\n                        var p = d.getHours();\n                        if (self.options.colLimit > 0 || self.options.rowLimit > 0) {\n                            switch (self.options.domain) {\n                                case \"month\":\n                                    p += (d.getDate() - 1) * 24;\n                                    break;\n                                case \"week\":\n                                    p += self.getWeekDay(d) * 24;\n                                    break;\n                            }\n                        }\n                        return Math.floor(p % self._domainType.hour.row(d));\n                    }\n                },\n                format: {\n                    date: \"%Hh, %A %B %-e, %Y\",\n                    legend: \"%H:00\",\n                    connector: \"at\"\n                },\n                extractUnit(d) {\n                    return new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours()).getTime();\n                }\n            },\n            \"day\": {\n                name: \"day\",\n                level: 30,\n                maxItemNumber(d) {\n                    switch (self.options.domain) {\n                        case \"week\":\n                            return 7;\n                        case \"month\":\n                            return self.options.domainDynamicDimension ? self.getDayCountInMonth(d) : 31;\n                        case \"year\":\n                            return self.options.domainDynamicDimension ? self.getDayCountInYear(d) : 366;\n                    }\n                },\n                defaultColumnNumber(d) {\n                    d = new Date(d);\n                    switch (self.options.domain) {\n                        case \"week\":\n                            return 1;\n                        case \"month\":\n                            return (self.options.domainDynamicDimension && !self.options.verticalOrientation) ? (self.getWeekNumber(new Date(d.getFullYear(), d.getMonth() + 1, 0)) - self.getWeekNumber(d) + 1) : 6;\n                        case \"year\":\n                            return (self.options.domainDynamicDimension ? (self.getWeekNumber(new Date(d.getFullYear(), 11, 31)) - self.getWeekNumber(new Date(d.getFullYear(), 0)) + 1) : 54);\n                    }\n                },\n                defaultRowNumber: 7,\n                row(d) {\n                    return self.getSubDomainRowNumber(d);\n                },\n                column(d) {\n                    return self.getSubDomainColumnNumber(d);\n                },\n                position: {\n                    x(d) {\n                        switch (self.options.domain) {\n                            case \"week\":\n                                return Math.floor(self.getWeekDay(d) / self._domainType.day.row(d));\n                            case \"month\":\n                                if (self.options.colLimit > 0 || self.options.rowLimit > 0) {\n                                    return Math.floor((d.getDate() - 1) / self._domainType.day.row(d));\n                                }\n                                return self.getWeekNumber(d) - self.getWeekNumber(new Date(d.getFullYear(), d.getMonth()));\n                            case \"year\":\n                                if (self.options.colLimit > 0 || self.options.rowLimit > 0) {\n                                    return Math.floor((self.getDayOfYear(d) - 1) / self._domainType.day.row(d));\n                                }\n                                return self.getWeekNumber(d);\n                        }\n                    },\n                    y(d) {\n                        var p = self.getWeekDay(d);\n                        if (self.options.colLimit > 0 || self.options.rowLimit > 0) {\n                            switch (self.options.domain) {\n                                case \"year\":\n                                    p = self.getDayOfYear(d) - 1;\n                                    break;\n                                case \"week\":\n                                    p = self.getWeekDay(d);\n                                    break;\n                                case \"month\":\n                                    p = d.getDate() - 1;\n                                    break;\n                            }\n                        }\n                        return Math.floor(p % self._domainType.day.row(d));\n                    }\n                },\n                format: {\n                    date: \"%A %B %-e, %Y\",\n                    legend: \"%e %b\",\n                    connector: \"on\"\n                },\n                extractUnit(d) {\n                    return new Date(d.getFullYear(), d.getMonth(), d.getDate()).getTime();\n                }\n            },\n            \"week\": {\n                name: \"week\",\n                level: 40,\n                maxItemNumber: 54,\n                defaultColumnNumber(d) {\n                    d = new Date(d);\n                    switch (self.options.domain) {\n                        case \"year\":\n                            return self._domainType.week.maxItemNumber;\n                        case \"month\":\n                            return self.options.domainDynamicDimension ? self.getWeekNumber(new Date(d.getFullYear(), d.getMonth() + 1, 0)) - self.getWeekNumber(d) : 5;\n                    }\n                },\n                defaultRowNumber: 1,\n                row(d) {\n                    return self.getSubDomainRowNumber(d);\n                },\n                column(d) {\n                    return self.getSubDomainColumnNumber(d);\n                },\n                position: {\n                    x(d) {\n                        switch (self.options.domain) {\n                            case \"year\":\n                                return Math.floor(self.getWeekNumber(d) / self._domainType.week.row(d));\n                            case \"month\":\n                                return Math.floor(self.getMonthWeekNumber(d) / self._domainType.week.row(d));\n                        }\n                    },\n                    y(d) {\n                        return self.getWeekNumber(d) % self._domainType.week.row(d);\n                    }\n                },\n                format: {\n                    date: \"%B Week #%W\",\n                    legend: \"%B Week #%W\",\n                    connector: \"in\"\n                },\n                extractUnit(d) {\n                    var dt = new Date(d.getFullYear(), d.getMonth(), d.getDate());\n                    // According to ISO-8601, week number computation are based on week starting on Monday\n                    var weekDay = dt.getDay() - (self.options.weekStartOnMonday ? 1 : 0);\n                    if (weekDay < 0) {\n                        weekDay = 6;\n                    }\n                    dt.setDate(dt.getDate() - weekDay);\n                    return dt.getTime();\n                }\n            },\n            \"month\": {\n                name: \"month\",\n                level: 50,\n                maxItemNumber: 12,\n                defaultColumnNumber: 12,\n                defaultRowNumber: 1,\n                row() {\n                    return self.getSubDomainRowNumber();\n                },\n                column() {\n                    return self.getSubDomainColumnNumber();\n                },\n                position: {\n                    x(d) {\n                        return Math.floor(d.getMonth() / self._domainType.month.row(d));\n                    },\n                    y(d) {\n                        return d.getMonth() % self._domainType.month.row(d);\n                    }\n                },\n                format: {\n                    date: \"%B %Y\",\n                    legend: \"%B\",\n                    connector: \"in\"\n                },\n                extractUnit(d) {\n                    return new Date(d.getFullYear(), d.getMonth()).getTime();\n                }\n            },\n            \"year\": {\n                name: \"year\",\n                level: 60,\n                row() {\n                    return self.options.rowLimit || 1;\n                },\n                column() {\n                    return self.options.colLimit || 1;\n                },\n                position: {\n                    x() {\n                        return 1;\n                    },\n                    y() {\n                        return 1;\n                    }\n                },\n                format: {\n                    date: \"%Y\",\n                    legend: \"%Y\",\n                    connector: \"in\"\n                },\n                extractUnit(d) {\n                    return new Date(d.getFullYear()).getTime();\n                }\n            }\n        };\n\n        for (var type in this._domainType) {\n            if (this._domainType.hasOwnProperty(type)) {\n                var d = this._domainType[type];\n                this._domainType[\"x_\" + type] = {\n                    name: \"x_\" + type,\n                    level: d.type,\n                    maxItemNumber: d.maxItemNumber,\n                    defaultRowNumber: d.defaultRowNumber,\n                    defaultColumnNumber: d.defaultColumnNumber,\n                    row: d.column,\n                    column: d.row,\n                    position: {\n                        x: d.position.y,\n                        y: d.position.x\n                    },\n                    format: d.format,\n                    extractUnit: d.extractUnit\n                };\n            }\n        }\n\n        // Record the address of the last inserted domain when browsing\n        this.lastInsertedSvg = null;\n\n        this._completed = false;\n\n        // Record all the valid domains\n        // Each domain value is a timestamp in milliseconds\n        this._domains = d3.map();\n\n        this.graphDim = {\n            width: 0,\n            height: 0\n        };\n\n        this.legendDim = {\n            width: 0,\n            height: 0\n        };\n\n        this.NAVIGATE_LEFT = 1;\n        this.NAVIGATE_RIGHT = 2;\n\n        // Various update mode when using the update() API\n        this.RESET_ALL_ON_UPDATE = 0;\n        this.RESET_SINGLE_ON_UPDATE = 1;\n        this.APPEND_ON_UPDATE = 2;\n\n        this.DEFAULT_LEGEND_MARGIN = 10;\n\n        this.root = null;\n        this.tooltip = null;\n\n        this._maxDomainReached = false;\n        this._minDomainReached = false;\n\n        this.domainPosition = new DomainPosition();\n        this.Legend = null;\n        this.legendScale = null;\n\n        // List of domains that are skipped because of DST\n        // All times belonging to these domains should be re-assigned to the previous domain\n        this.DSTDomain = [];\n\n        /**\n         * Display the graph for the first time\n         * @return bool True if the calendar is created\n         */\n        this._init = function() {\n\n            self.getDomain(self.options.start).map(function(d) {\n                return d.getTime();\n            }).map(function(d) {\n                self._domains.set(d, self.getSubDomain(d).map(function(d) {\n                    return { t: self._domainType[self.options.subDomain].extractUnit(d), v: null };\n                }));\n            });\n\n            self.root = d3.select(self.options.itemSelector).append(\"svg\").attr(\"class\", \"cal-heatmap-container\");\n\n            self.tooltip = d3.select(self.options.itemSelector)\n                .attr(\"style\", function() {\n                    var current = d3.select(self.options.itemSelector).attr(\"style\");\n                    return (current !== null ? current : \"\") + \"position:relative;\";\n                })\n                .append(\"div\")\n                .attr(\"class\", \"ch-tooltip\");\n\n            self.root.attr(\"x\", 0).attr(\"y\", 0).append(\"svg\").attr(\"class\", \"graph\");\n\n            self.Legend = new Legend(self);\n\n            if (self.options.paintOnLoad) {\n                _initCalendar();\n            }\n\n            return true;\n        };\n\n        function _initCalendar() {\n            self.verticalDomainLabel = (self.options.label.position === \"top\" || self.options.label.position === \"bottom\");\n\n            self.domainVerticalLabelHeight = self.options.label.height === null ? Math.max(25, self.options.cellSize * 2) : self.options.label.height;\n            self.domainHorizontalLabelWidth = 0;\n\n            if (self.options.domainLabelFormat === \"\" && self.options.label.height === null) {\n                self.domainVerticalLabelHeight = 0;\n            }\n\n            if (!self.verticalDomainLabel) {\n                self.domainVerticalLabelHeight = 0;\n                self.domainHorizontalLabelWidth = self.options.label.width;\n            }\n\n            self.paint();\n\n            // =========================================================================//\n            // ATTACHING DOMAIN NAVIGATION EVENT\t\t\t\t\t\t\t\t\t\t//\n            // =========================================================================//\n            if (self.options.nextSelector !== false) {\n                d3.select(self.options.nextSelector).on(\"click.\" + self.options.itemNamespace, function() {\n                    d3.event.preventDefault();\n                    return self.loadNextDomain(1);\n                });\n            }\n\n            if (self.options.previousSelector !== false) {\n                d3.select(self.options.previousSelector).on(\"click.\" + self.options.itemNamespace, function() {\n                    d3.event.preventDefault();\n                    return self.loadPreviousDomain(1);\n                });\n            }\n\n            self.Legend.redraw(self.graphDim.width - self.options.domainGutter - self.options.cellPadding);\n            self.afterLoad();\n\n            var domains = self.getDomainKeys();\n\n            // Fill the graph with some datas\n            if (self.options.loadOnInit) {\n                self.getDatas(\n                    self.options.data,\n                    new Date(domains[0]),\n                    self.getSubDomain(domains[domains.length - 1]).pop(),\n                    function() {\n                        self.fill();\n                        self.onComplete();\n                    }\n                );\n            } else {\n                self.onComplete();\n            }\n\n            self.checkIfMinDomainIsReached(domains[0]);\n            self.checkIfMaxDomainIsReached(self.getNextDomain().getTime());\n        }\n\n        // Return the width of the domain block, without the domain gutter\n        // @param int d Domain start timestamp\n        function w(d, outer) {\n            var width = self.options.cellSize * self._domainType[self.options.subDomain].column(d) + self.options.cellPadding * self._domainType[self.options.subDomain].column(d);\n            if (arguments.length === 2 && outer === true) {\n                return width += self.domainHorizontalLabelWidth + self.options.domainGutter + self.options.domainMargin[1] + self.options.domainMargin[3];\n            }\n            return width;\n        }\n\n        // Return the height of the domain block, without the domain gutter\n        function h(d, outer) {\n            var height = self.options.cellSize * self._domainType[self.options.subDomain].row(d) + self.options.cellPadding * self._domainType[self.options.subDomain].row(d);\n            if (arguments.length === 2 && outer === true) {\n                height += self.options.domainGutter + self.domainVerticalLabelHeight + self.options.domainMargin[0] + self.options.domainMargin[2];\n            }\n            return height;\n        }\n\n        /**\n         *\n         *\n         * @param int navigationDir\n         */\n        this.paint = function(navigationDir) {\n\n            var options = self.options;\n\n            if (arguments.length === 0) {\n                navigationDir = false;\n            }\n\n            // Painting all the domains\n            var domainSvg = self.root.select(\".graph\")\n                .selectAll(\".graph-domain\")\n                .data(\n                    function() {\n                        var data = self.getDomainKeys();\n                        return navigationDir === self.NAVIGATE_LEFT ? data.reverse() : data;\n                    },\n                    function(d) {\n                        return d;\n                    }\n                );\n\n            var enteringDomainDim = 0;\n            var exitingDomainDim = 0;\n\n            // =========================================================================//\n            // PAINTING DOMAIN\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\n            // =========================================================================//\n\n            var svg = domainSvg\n                .enter()\n                .append(\"svg\")\n                .attr(\"width\", function(d) {\n                    return w(d, true);\n                })\n                .attr(\"height\", function(d) {\n                    return h(d, true);\n                })\n                .attr(\"x\", function(d) {\n                    if (options.verticalOrientation) {\n                        self.graphDim.width = Math.max(self.graphDim.width, w(d, true));\n                        return 0;\n                    } else {\n                        return getDomainPosition(d, self.graphDim, \"width\", w(d, true));\n                    }\n                })\n                .attr(\"y\", function(d) {\n                    if (options.verticalOrientation) {\n                        return getDomainPosition(d, self.graphDim, \"height\", h(d, true));\n                    } else {\n                        self.graphDim.height = Math.max(self.graphDim.height, h(d, true));\n                        return 0;\n                    }\n                })\n                .attr(\"class\", function(d) {\n                    var classname = \"graph-domain\";\n                    var date = new Date(d);\n                    switch (options.domain) {\n                        case \"hour\":\n                            classname += \" h_\" + date.getHours();\n                            /* falls through */\n                        case \"day\":\n                            classname += \" d_\" + date.getDate() + \" dy_\" + date.getDay();\n                            /* falls through */\n                        case \"week\":\n                            classname += \" w_\" + self.getWeekNumber(date);\n                            /* falls through */\n                        case \"month\":\n                            classname += \" m_\" + (date.getMonth() + 1);\n                            /* falls through */\n                        case \"year\":\n                            classname += \" y_\" + date.getFullYear();\n                    }\n                    return classname;\n                });\n\n            self.lastInsertedSvg = svg;\n\n            function getDomainPosition(domainIndex, graphDim, axis, domainDim) {\n                var tmp = 0;\n                switch (navigationDir) {\n                    case false:\n                        tmp = graphDim[axis];\n\n                        graphDim[axis] += domainDim;\n                        self.domainPosition.setPosition(domainIndex, tmp);\n                        return tmp;\n\n                    case self.NAVIGATE_RIGHT:\n                        self.domainPosition.setPosition(domainIndex, graphDim[axis]);\n\n                        enteringDomainDim = domainDim;\n                        exitingDomainDim = self.domainPosition.getPositionFromIndex(1);\n\n                        self.domainPosition.shiftRightBy(exitingDomainDim);\n                        return graphDim[axis];\n\n                    case self.NAVIGATE_LEFT:\n                        tmp = -domainDim;\n\n                        enteringDomainDim = -tmp;\n                        exitingDomainDim = graphDim[axis] - self.domainPosition.getLast();\n\n                        self.domainPosition.setPosition(domainIndex, tmp);\n                        self.domainPosition.shiftLeftBy(enteringDomainDim);\n                        return tmp;\n                }\n            }\n\n            svg.append(\"rect\")\n                .attr(\"width\", function(d) {\n                    return w(d, true) - options.domainGutter - options.cellPadding;\n                })\n                .attr(\"height\", function(d) {\n                    return h(d, true) - options.domainGutter - options.cellPadding;\n                })\n                .attr(\"class\", \"domain-background\");\n\n            // =========================================================================//\n            // PAINTING SUBDOMAINS\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\n            // =========================================================================//\n            var subDomainSvgGroup = svg.append(\"svg\")\n                .attr(\"x\", function() {\n                    if (options.label.position === \"left\") {\n                        return self.domainHorizontalLabelWidth + options.domainMargin[3];\n                    } else {\n                        return options.domainMargin[3];\n                    }\n                })\n                .attr(\"y\", function() {\n                    if (options.label.position === \"top\") {\n                        return self.domainVerticalLabelHeight + options.domainMargin[0];\n                    } else {\n                        return options.domainMargin[0];\n                    }\n                })\n                .attr(\"class\", \"graph-subdomain-group\");\n\n            var rect = subDomainSvgGroup\n                .selectAll(\"g\")\n                .data(function(d) {\n                    return self._domains.get(d);\n                })\n                .enter()\n                .append(\"g\");\n\n            rect\n                .append(\"rect\")\n                .attr(\"class\", function(d) {\n                    return \"graph-rect\" + self.getHighlightClassName(d.t) + (options.onClick !== null ? \" hover_cursor\" : \"\");\n                })\n                .attr(\"width\", options.cellSize)\n                .attr(\"height\", options.cellSize)\n                .attr(\"x\", function(d) {\n                    return self.positionSubDomainX(d.t);\n                })\n                .attr(\"y\", function(d) {\n                    return self.positionSubDomainY(d.t);\n                })\n                .on(\"click\", function(d) {\n                    if (options.onClick !== null) {\n                        return self.onClick(new Date(d.t), d.v);\n                    }\n                })\n                .call(function(selection) {\n                    if (options.cellRadius > 0) {\n                        selection\n                            .attr(\"rx\", options.cellRadius)\n                            .attr(\"ry\", options.cellRadius);\n                    }\n\n                    if (self.legendScale !== null && options.legendColors !== null && options.legendColors.hasOwnProperty(\"base\")) {\n                        selection.attr(\"fill\", options.legendColors.base);\n                    }\n\n                    if (options.tooltip) {\n                        selection.on(\"mouseover\", function(d) {\n                            var domainNode = this.parentNode.parentNode;\n\n                            self.tooltip\n                                .html(self.getSubDomainTitle(d))\n                                .attr(\"style\", \"display: block;\");\n\n                            var tooltipPositionX = self.positionSubDomainX(d.t) - self.tooltip.node().offsetWidth / 2 + options.cellSize / 2;\n                            var tooltipPositionY = self.positionSubDomainY(d.t) - self.tooltip.node().offsetHeight - options.cellSize / 2;\n\n                            // Offset by the domain position\n                            tooltipPositionX += parseInt(domainNode.getAttribute(\"x\"), 10);\n                            tooltipPositionY += parseInt(domainNode.getAttribute(\"y\"), 10);\n\n                            // Offset by the calendar position (when legend is left/top)\n                            tooltipPositionX += parseInt(self.root.select(\".graph\").attr(\"x\"), 10);\n                            tooltipPositionY += parseInt(self.root.select(\".graph\").attr(\"y\"), 10);\n\n                            // Offset by the inside domain position (when label is left/top)\n                            tooltipPositionX += parseInt(domainNode.parentNode.getAttribute(\"x\"), 10);\n                            tooltipPositionY += parseInt(domainNode.parentNode.getAttribute(\"y\"), 10);\n\n                            self.tooltip.attr(\"style\",\n                                \"display: block; \" +\n                                \"left: \" + tooltipPositionX + \"px; \" +\n                                \"top: \" + tooltipPositionY + \"px;\");\n                        });\n\n                        selection.on(\"mouseout\", function() {\n                            self.tooltip\n                                .attr(\"style\", \"display:none\")\n                                .html(\"\");\n                        });\n                    }\n                });\n\n            // Appending a title to each subdomain\n            if (!options.tooltip) {\n                rect.append(\"title\").text(function(d) {\n                    return self.formatDate(new Date(d.t), options.subDomainDateFormat);\n                });\n            }\n\n            // =========================================================================//\n            // PAINTING LABEL\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\n            // =========================================================================//\n            if (options.domainLabelFormat !== \"\") {\n                svg.append(\"text\")\n                    .attr(\"class\", \"graph-label\")\n                    .attr(\"y\", function(d) {\n                        var y = options.domainMargin[0];\n                        switch (options.label.position) {\n                            case \"top\":\n                                y += self.domainVerticalLabelHeight / 2;\n                                break;\n                            case \"bottom\":\n                                y += h(d) + self.domainVerticalLabelHeight / 2;\n                        }\n\n                        return y + options.label.offset.y *\n                            (\n                                ((options.label.rotate === \"right\" && options.label.position === \"right\") ||\n                                    (options.label.rotate === \"left\" && options.label.position === \"left\")) ?\n                                -1 : 1\n                            );\n                    })\n                    .attr(\"x\", function(d) {\n                        var x = options.domainMargin[3];\n                        switch (options.label.position) {\n                            case \"right\":\n                                x += w(d);\n                                break;\n                            case \"bottom\":\n                            case \"top\":\n                                x += w(d) / 2;\n                        }\n\n                        if (options.label.align === \"right\") {\n                            return x + self.domainHorizontalLabelWidth - options.label.offset.x *\n                                (options.label.rotate === \"right\" ? -1 : 1);\n                        }\n                        return x + options.label.offset.x;\n\n                    })\n                    .attr(\"text-anchor\", function() {\n                        switch (options.label.align) {\n                            case \"start\":\n                            case \"left\":\n                                return \"start\";\n                            case \"end\":\n                            case \"right\":\n                                return \"end\";\n                            default:\n                                return \"middle\";\n                        }\n                    })\n                    .attr(\"dominant-baseline\", function() {\n                        return self.verticalDomainLabel ? \"middle\" : \"top\";\n                    })\n                    .text(function(d) {\n                        return self.formatDate(new Date(d), options.domainLabelFormat);\n                    })\n                    .call(domainRotate);\n            }\n\n            function domainRotate(selection) {\n                switch (options.label.rotate) {\n                    case \"right\":\n                        selection\n                            .attr(\"transform\", function(d) {\n                                var s = \"rotate(90), \";\n                                switch (options.label.position) {\n                                    case \"right\":\n                                        s += \"translate(-\" + w(d) + \" , -\" + w(d) + \")\";\n                                        break;\n                                    case \"left\":\n                                        s += \"translate(0, -\" + self.domainHorizontalLabelWidth + \")\";\n                                        break;\n                                }\n\n                                return s;\n                            });\n                        break;\n                    case \"left\":\n                        selection\n                            .attr(\"transform\", function(d) {\n                                var s = \"rotate(270), \";\n                                switch (options.label.position) {\n                                    case \"right\":\n                                        s += \"translate(-\" + (w(d) + self.domainHorizontalLabelWidth) + \" , \" + w(d) + \")\";\n                                        break;\n                                    case \"left\":\n                                        s += \"translate(-\" + (self.domainHorizontalLabelWidth) + \" , \" + self.domainHorizontalLabelWidth + \")\";\n                                        break;\n                                }\n\n                                return s;\n                            });\n                        break;\n                }\n            }\n\n            // =========================================================================//\n            // PAINTING DOMAIN SUBDOMAIN CONTENT\t\t\t\t\t\t\t\t\t\t//\n            // =========================================================================//\n            if (options.subDomainTextFormat !== null) {\n                rect\n                    .append(\"text\")\n                    .attr(\"class\", function(d) {\n                        return \"subdomain-text\" + self.getHighlightClassName(d.t);\n                    })\n                    .attr(\"x\", function(d) {\n                        return self.positionSubDomainX(d.t) + options.cellSize / 2;\n                    })\n                    .attr(\"y\", function(d) {\n                        return self.positionSubDomainY(d.t) + options.cellSize / 2;\n                    })\n                    .attr(\"text-anchor\", \"middle\")\n                    .attr(\"dominant-baseline\", \"central\")\n                    .text(function(d) {\n                        return self.formatDate(new Date(d.t), options.subDomainTextFormat);\n                    });\n            }\n\n            // =========================================================================//\n            // ANIMATION\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\n            // =========================================================================//\n\n            if (navigationDir !== false) {\n                domainSvg.transition().duration(options.animationDuration)\n                    .attr(\"x\", function(d) {\n                        return options.verticalOrientation ? 0 : self.domainPosition.getPosition(d);\n                    })\n                    .attr(\"y\", function(d) {\n                        return options.verticalOrientation ? self.domainPosition.getPosition(d) : 0;\n                    });\n            }\n\n            var tempWidth = self.graphDim.width;\n            var tempHeight = self.graphDim.height;\n\n            if (options.verticalOrientation) {\n                self.graphDim.height += enteringDomainDim - exitingDomainDim;\n            } else {\n                self.graphDim.width += enteringDomainDim - exitingDomainDim;\n            }\n\n            // At the time of exit, domainsWidth and domainsHeight already automatically shifted\n            domainSvg.exit().transition().duration(options.animationDuration)\n                .attr(\"x\", function(d) {\n                    if (options.verticalOrientation) {\n                        return 0;\n                    } else {\n                        switch (navigationDir) {\n                            case self.NAVIGATE_LEFT:\n                                return Math.min(self.graphDim.width, tempWidth);\n                            case self.NAVIGATE_RIGHT:\n                                return -w(d, true);\n                        }\n                    }\n                })\n                .attr(\"y\", function(d) {\n                    if (options.verticalOrientation) {\n                        switch (navigationDir) {\n                            case self.NAVIGATE_LEFT:\n                                return Math.min(self.graphDim.height, tempHeight);\n                            case self.NAVIGATE_RIGHT:\n                                return -h(d, true);\n                        }\n                    } else {\n                        return 0;\n                    }\n                })\n                .remove();\n\n            // Resize the root container\n            self.resize();\n        };\n    }\n\n    /**\n     * Validate and merge user settings with default settings\n     *\n     * @param  {object} settings User settings\n     * @return {bool} False if settings contains error\n     */\n    /* jshint maxstatements:false */\n    init(settings) {\n        \"use strict\";\n\n        var parent = this;\n\n        var options = parent.options = mergeRecursive(parent.options, settings);\n\n        // Fatal errors\n        // Stop script execution on error\n        validateDomainType();\n        validateSelector(options.itemSelector, false, \"itemSelector\");\n\n        if (parent.allowedDataType.indexOf(options.dataType) === -1) {\n            throw new Error(\"The data type '\" + options.dataType + \"' is not valid data type\");\n        }\n\n        if (d3.select(options.itemSelector).node() === null) {\n            throw new Error(\"The node '\" + options.itemSelector + \"' specified in itemSelector does not exists\");\n        }\n\n        try {\n            validateSelector(options.nextSelector, true, \"nextSelector\");\n            validateSelector(options.previousSelector, true, \"previousSelector\");\n        } catch (error) {\n            console.log(error.message);\n            return false;\n        }\n\n        // If other settings contains error, will fallback to default\n\n        if (!settings.hasOwnProperty(\"subDomain\")) {\n            this.options.subDomain = getOptimalSubDomain(settings.domain);\n        }\n\n        if (typeof options.itemNamespace !== \"string\" || options.itemNamespace === \"\") {\n            console.log(\"itemNamespace can not be empty, falling back to cal-heatmap\");\n            options.itemNamespace = \"cal-heatmap\";\n        }\n\n        // Don't touch these settings\n        var s = [\"data\", \"onComplete\", \"onClick\", \"afterLoad\", \"afterLoadData\", \"afterLoadPreviousDomain\", \"afterLoadNextDomain\"];\n\n        for (var k in s) {\n            if (settings.hasOwnProperty(s[k])) {\n                options[s[k]] = settings[s[k]];\n            }\n        }\n\n        options.subDomainDateFormat = (typeof options.subDomainDateFormat === \"string\" || typeof options.subDomainDateFormat === \"function\" ? options.subDomainDateFormat : this._domainType[options.subDomain].format.date);\n        options.domainLabelFormat = (typeof options.domainLabelFormat === \"string\" || typeof options.domainLabelFormat === \"function\" ? options.domainLabelFormat : this._domainType[options.domain].format.legend);\n        options.subDomainTextFormat = ((typeof options.subDomainTextFormat === \"string\" && options.subDomainTextFormat !== \"\") || typeof options.subDomainTextFormat === \"function\" ? options.subDomainTextFormat : null);\n        options.domainMargin = expandMarginSetting(options.domainMargin);\n        options.legendMargin = expandMarginSetting(options.legendMargin);\n        options.highlight = parent.expandDateSetting(options.highlight);\n        options.itemName = expandItemName(options.itemName);\n        options.colLimit = parseColLimit(options.colLimit);\n        options.rowLimit = parseRowLimit(options.rowLimit);\n        if (!settings.hasOwnProperty(\"legendMargin\")) {\n            autoAddLegendMargin();\n        }\n        autoAlignLabel();\n\n        /**\n         * Validate that a queryString is valid\n         *\n         * @param  {Element|string|bool} selector   The queryString to test\n         * @param  {bool}\tcanBeFalse\tWhether false is an accepted and valid value\n         * @param  {string} name\t\tName of the tested selector\n         * @throws {Error}\t\t\t\tIf the selector is not valid\n         * @return {bool}\t\t\t\tTrue if the selector is a valid queryString\n         */\n        function validateSelector(selector, canBeFalse, name) {\n            if (((canBeFalse && selector === false) || selector instanceof Element || typeof selector === \"string\") && selector !== \"\") {\n                return true;\n            }\n            throw new Error(\"The \" + name + \" is not valid\");\n        }\n\n        /**\n         * Return the optimal subDomain for the specified domain\n         *\n         * @param  {string} domain a domain name\n         * @return {string}        the subDomain name\n         */\n        function getOptimalSubDomain(domain) {\n            switch (domain) {\n                case \"year\":\n                    return \"month\";\n                case \"month\":\n                    return \"day\";\n                case \"week\":\n                    return \"day\";\n                case \"day\":\n                    return \"hour\";\n                default:\n                    return \"min\";\n            }\n        }\n\n        /**\n         * Ensure that the domain and subdomain are valid\n         *\n         * @throw {Error} when domain or subdomain are not valid\n         * @return {bool} True if domain and subdomain are valid and compatible\n         */\n        function validateDomainType() {\n            if (!parent._domainType.hasOwnProperty(options.domain) || options.domain === \"min\" || options.domain.substring(0, 2) === \"x_\") {\n                throw new Error(\"The domain '\" + options.domain + \"' is not valid\");\n            }\n\n            if (!parent._domainType.hasOwnProperty(options.subDomain) || options.subDomain === \"year\") {\n                throw new Error(\"The subDomain '\" + options.subDomain + \"' is not valid\");\n            }\n\n            if (parent._domainType[options.domain].level <= parent._domainType[options.subDomain].level) {\n                throw new Error(\"'\" + options.subDomain + \"' is not a valid subDomain to '\" + options.domain + \"'\");\n            }\n\n            return true;\n        }\n\n        /**\n         * Fine-tune the label alignement depending on its position\n         *\n         * @return void\n         */\n        function autoAlignLabel() {\n            // Auto-align label, depending on it's position\n            if (!settings.hasOwnProperty(\"label\") || (settings.hasOwnProperty(\"label\") && !settings.label.hasOwnProperty(\"align\"))) {\n                switch (options.label.position) {\n                    case \"left\":\n                        options.label.align = \"right\";\n                        break;\n                    case \"right\":\n                        options.label.align = \"left\";\n                        break;\n                    default:\n                        options.label.align = \"center\";\n                }\n\n                if (options.label.rotate === \"left\") {\n                    options.label.align = \"right\";\n                } else if (options.label.rotate === \"right\") {\n                    options.label.align = \"left\";\n                }\n            }\n\n            if (!settings.hasOwnProperty(\"label\") || (settings.hasOwnProperty(\"label\") && !settings.label.hasOwnProperty(\"offset\"))) {\n                if (options.label.position === \"left\" || options.label.position === \"right\") {\n                    options.label.offset = {\n                        x: 10,\n                        y: 15\n                    };\n                }\n            }\n        }\n\n        /**\n         * If not specified, add some margin around the legend depending on its position\n         *\n         * @return void\n         */\n        function autoAddLegendMargin() {\n            switch (options.legendVerticalPosition) {\n                case \"top\":\n                    options.legendMargin[2] = parent.DEFAULT_LEGEND_MARGIN;\n                    break;\n                case \"bottom\":\n                    options.legendMargin[0] = parent.DEFAULT_LEGEND_MARGIN;\n                    break;\n                case \"middle\":\n                case \"center\":\n                    options.legendMargin[options.legendHorizontalPosition === \"right\" ? 3 : 1] = parent.DEFAULT_LEGEND_MARGIN;\n            }\n        }\n\n        /**\n         * Expand a number of an array of numbers to an usable 4 values array\n         *\n         * @param  {integer|array} value\n         * @return {array}        array\n         */\n        function expandMarginSetting(value) {\n            if (typeof value === \"number\") {\n                value = [value];\n            }\n\n            if (!Array.isArray(value)) {\n                console.log(\"Margin only takes an integer or an array of integers\");\n                value = [0];\n            }\n\n            switch (value.length) {\n                case 1:\n                    return [value[0], value[0], value[0], value[0]];\n                case 2:\n                    return [value[0], value[1], value[0], value[1]];\n                case 3:\n                    return [value[0], value[1], value[2], value[1]];\n                case 4:\n                    return value;\n                default:\n                    return value.slice(0, 4);\n            }\n        }\n\n        /**\n         * Convert a string to an array like [singular-form, plural-form]\n         *\n         * @param  {string|array} value Date to convert\n         * @return {array}       An array like [singular-form, plural-form]\n         */\n        function expandItemName(value) {\n            if (typeof value === \"string\") {\n                return [value, value + (value !== \"\" ? \"s\" : \"\")];\n            }\n\n            if (Array.isArray(value)) {\n                if (value.length === 1) {\n                    return [value[0], value[0] + \"s\"];\n                } else if (value.length > 2) {\n                    return value.slice(0, 2);\n                }\n\n                return value;\n            }\n\n            return [\"item\", \"items\"];\n        }\n\n        function parseColLimit(value) {\n            return value > 0 ? value : null;\n        }\n\n        function parseRowLimit(value) {\n            if (value > 0 && options.colLimit > 0) {\n                console.log(\"colLimit and rowLimit are mutually exclusive, rowLimit will be ignored\");\n                return null;\n            }\n            return value > 0 ? value : null;\n        }\n\n        return this._init();\n\n    }\n\n        /**\n         * Convert a keyword or an array of keyword/date to an array of date objects\n         *\n         * @param  {string|array|Date} value Data to convert\n         * @return {array}       An array of Dates\n         */\n        expandDateSetting(value) {\n            \"use strict\";\n\n            if (!Array.isArray(value)) {\n                value = [value];\n            }\n\n            return value.map(function(data) {\n                if (data === \"now\") {\n                    return new Date();\n                }\n                if (data instanceof Date) {\n                    return data;\n                }\n                return false;\n            }).filter(function(d) {\n                return d !== false;\n            });\n        }\n\n        /**\n         * Fill the calendar by coloring the cells\n         *\n         * @param array svg An array of html node to apply the transformation to (optional)\n         *                  It's used to limit the painting to only a subset of the calendar\n         * @return void\n         */\n        fill(svg) {\n            \"use strict\";\n\n            var parent = this;\n            var options = parent.options;\n\n            if (arguments.length === 0) {\n                svg = parent.root.selectAll(\".graph-domain\");\n            }\n\n            var rect = svg\n                .selectAll(\"svg\").selectAll(\"g\")\n                .data(function(d) {\n                    return parent._domains.get(d);\n                });\n\n            /**\n             * Colorize the cell via a style attribute if enabled\n             */\n            function addStyle(element) {\n                if (parent.legendScale === null) {\n                    return false;\n                }\n\n                element.attr(\"fill\", function(d) {\n                    if (d.v === null && (options.hasOwnProperty(\"considerMissingDataAsZero\") && !options.considerMissingDataAsZero)) {\n                        if (options.legendColors.hasOwnProperty(\"base\")) {\n                            return options.legendColors.base;\n                        }\n                    }\n\n                    if (options.legendColors !== null && options.legendColors.hasOwnProperty(\"empty\") &&\n                        (d.v === 0 || (d.v === null && options.hasOwnProperty(\"considerMissingDataAsZero\") && options.considerMissingDataAsZero))\n                    ) {\n                        return options.legendColors.empty;\n                    }\n\n                    if (d.v < 0 && options.legend[0] > 0 && options.legendColors !== null && options.legendColors.hasOwnProperty(\"overflow\")) {\n                        return options.legendColors.overflow;\n                    }\n\n                    return parent.legendScale(Math.min(d.v, options.legend[options.legend.length - 1]));\n                });\n            }\n\n            rect.transition().duration(options.animationDuration).select(\"rect\")\n                .attr(\"class\", function(d) {\n\n                    var htmlClass = parent.getHighlightClassName(d.t).trim().split(\" \");\n                    var pastDate = parent.dateIsLessThan(d.t, new Date());\n                    var sameDate = parent.dateIsEqual(d.t, new Date());\n\n                    if (parent.legendScale === null ||\n                        (d.v === null && (options.hasOwnProperty(\"considerMissingDataAsZero\") && !options.considerMissingDataAsZero) && !options.legendColors.hasOwnProperty(\"base\"))\n                    ) {\n                        htmlClass.push(\"graph-rect\");\n                    }\n\n                    if (sameDate) {\n                        htmlClass.push(\"now\");\n                    } else if (!pastDate) {\n                        htmlClass.push(\"future\");\n                    }\n\n                    if (d.v !== null) {\n                        htmlClass.push(parent.Legend.getClass(d.v, (parent.legendScale === null)));\n                    } else if (options.considerMissingDataAsZero && pastDate) {\n                        htmlClass.push(parent.Legend.getClass(0, (parent.legendScale === null)));\n                    }\n\n                    if (options.onClick !== null) {\n                        htmlClass.push(\"hover_cursor\");\n                    }\n\n                    return htmlClass.join(\" \");\n                })\n                .call(addStyle);\n\n            rect.transition().duration(options.animationDuration).select(\"title\")\n                .text(function(d) {\n                    return parent.getSubDomainTitle(d);\n                });\n\n            function formatSubDomainText(element) {\n                if (typeof options.subDomainTextFormat === \"function\") {\n                    element.text(function(d) {\n                        return options.subDomainTextFormat(d.t, d.v);\n                    });\n                }\n            }\n\n            /**\n             * Change the subDomainText class if necessary\n             * Also change the text, e.g when text is representing the value\n             * instead of the date\n             */\n            rect.transition().duration(options.animationDuration).select(\"text\")\n                .attr(\"class\", function(d) {\n                    return \"subdomain-text\" + parent.getHighlightClassName(d.t);\n                })\n                .call(formatSubDomainText);\n        }\n\n        /**\n         * Sprintf like function.\n         * Replaces placeholders {0} in string with values from provided object.\n         * \n         * @param string formatted String containing placeholders.\n         * @param object args Object with properties to replace placeholders in string.\n         * \n         * @return String\n         */\n        formatStringWithObject(formatted, args) {\n            \"use strict\";\n            for (var prop in args) {\n                if (args.hasOwnProperty(prop)) {\n                    var regexp = new RegExp(\"\\\\{\" + prop + \"\\\\}\", \"gi\");\n                    formatted = formatted.replace(regexp, args[prop]);\n                }\n            }\n            return formatted;\n        }\n\n        // =========================================================================//\n        // EVENTS CALLBACK\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\n        // =========================================================================//\n\n        /**\n         * Helper method for triggering event callback\n         *\n         * @param  string\teventName       Name of the event to trigger\n         * @param  array\tsuccessArgs     List of argument to pass to the callback\n         * @param  boolean  skip\t\t\tWhether to skip the event triggering\n         * @return mixed\tTrue when the triggering was skipped, false on error, else the callback function\n         */\n        triggerEvent(eventName, successArgs, skip) {\n            \"use strict\";\n\n            if ((arguments.length === 3 && skip) || this.options[eventName] === null) {\n                return true;\n            }\n\n            if (typeof this.options[eventName] === \"function\") {\n                if (typeof successArgs === \"function\") {\n                    successArgs = successArgs();\n                }\n                return this.options[eventName].apply(this, successArgs);\n            } else {\n                console.log(\"Provided callback for \" + eventName + \" is not a function.\");\n                return false;\n            }\n        }\n\n        /**\n         * Event triggered on a mouse click on a subDomain cell\n         *\n         * @param  Date\t\td\t\tDate of the subdomain block\n         * @param  int\t\titemNb\tNumber of items in that date\n         */\n        onClick(d, itemNb) {\n            \"use strict\";\n\n            return this.triggerEvent(\"onClick\", [d, itemNb]);\n        }\n\n        /**\n         * Event triggered after drawing the calendar, byt before filling it with data\n         */\n        afterLoad() {\n            \"use strict\";\n\n            return this.triggerEvent(\"afterLoad\");\n        }\n\n        /**\n         * Event triggered after completing drawing and filling the calendar\n         */\n        onComplete() {\n            \"use strict\";\n\n            var response = this.triggerEvent(\"onComplete\", [], this._completed);\n            this._completed = true;\n            return response;\n        }\n\n        /**\n         * Event triggered after shifting the calendar one domain back\n         *\n         * @param  Date\t\tstart\tDomain start date\n         * @param  Date\t\tend\t\tDomain end date\n         */\n        afterLoadPreviousDomain(start) {\n            \"use strict\";\n\n            var parent = this;\n            return this.triggerEvent(\"afterLoadPreviousDomain\", function() {\n                var subDomain = parent.getSubDomain(start);\n                return [subDomain.shift(), subDomain.pop()];\n            });\n        }\n\n        /**\n         * Event triggered after shifting the calendar one domain above\n         *\n         * @param  Date\t\tstart\tDomain start date\n         * @param  Date\t\tend\t\tDomain end date\n         */\n        afterLoadNextDomain(start) {\n            \"use strict\";\n\n            var parent = this;\n            return this.triggerEvent(\"afterLoadNextDomain\", function() {\n                var subDomain = parent.getSubDomain(start);\n                return [subDomain.shift(), subDomain.pop()];\n            });\n        }\n\n        /**\n         * Event triggered after loading the leftmost domain allowed by minDate\n         *\n         * @param  boolean  reached True if the leftmost domain was reached\n         */\n        onMinDomainReached(reached) {\n            \"use strict\";\n\n            this._minDomainReached = reached;\n            return this.triggerEvent(\"onMinDomainReached\", [reached]);\n        }\n\n        /**\n         * Event triggered after loading the rightmost domain allowed by maxDate\n         *\n         * @param  boolean  reached True if the rightmost domain was reached\n         */\n        onMaxDomainReached(reached) {\n            \"use strict\";\n\n            this._maxDomainReached = reached;\n            return this.triggerEvent(\"onMaxDomainReached\", [reached]);\n        }\n\n        checkIfMinDomainIsReached(date, upperBound) {\n            \"use strict\";\n\n            if (this.minDomainIsReached(date)) {\n                this.onMinDomainReached(true);\n            }\n\n            if (arguments.length === 2) {\n                if (this._maxDomainReached && !this.maxDomainIsReached(upperBound)) {\n                    this.onMaxDomainReached(false);\n                }\n            }\n        }\n\n        checkIfMaxDomainIsReached(date, lowerBound) {\n            \"use strict\";\n\n            if (this.maxDomainIsReached(date)) {\n                this.onMaxDomainReached(true);\n            }\n\n            if (arguments.length === 2) {\n                if (this._minDomainReached && !this.minDomainIsReached(lowerBound)) {\n                    this.onMinDomainReached(false);\n                }\n            }\n        }\n\n        // =========================================================================//\n        // FORMATTER\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\n        // =========================================================================//\n\n        formatNumber() {\n        \treturn d3.format(\",g\").apply(this, arguments);\n        }\n\n        formatDate(d, format) {\n            \"use strict\";\n\n            if (arguments.length < 2) {\n                format = \"title\";\n            }\n\n            if (typeof format === \"function\") {\n                return format(d);\n            } else {\n                var f = d3.timeFormat(format);\n                return f(d);\n            }\n        }\n\n        getSubDomainTitle(d) {\n            \"use strict\";\n\n            if (d.v === null && !this.options.considerMissingDataAsZero) {\n                return this.formatStringWithObject(this.options.subDomainTitleFormat.empty, {\n                    date: this.formatDate(new Date(d.t), this.options.subDomainDateFormat)\n                });\n            } else {\n                var value = d.v;\n                // Consider null as 0\n                if (value === null && this.options.considerMissingDataAsZero) {\n                    value = 0;\n                }\n\n                return this.formatStringWithObject(this.options.subDomainTitleFormat.filled, {\n                    count: this.formatNumber(value),\n                    name: this.options.itemName[(value !== 1 ? 1 : 0)],\n                    connector: this._domainType[this.options.subDomain].format.connector,\n                    date: this.formatDate(new Date(d.t), this.options.subDomainDateFormat)\n                });\n            }\n        }\n\n        // =========================================================================//\n        // DOMAIN NAVIGATION\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\n        // =========================================================================//\n\n        /**\n         * Shift the calendar one domain forward\n         *\n         * The new domain is loaded only if it's not beyond maxDate\n         *\n         * @param int n Number of domains to load\n         * @return bool True if the next domain was loaded, else false\n         */\n        loadNextDomain(n) {\n            \"use strict\";\n\n            if (this._maxDomainReached || n === 0) {\n                return false;\n            }\n\n            var bound = this.loadNewDomains(this.NAVIGATE_RIGHT, this.getDomain(this.getNextDomain(), n));\n\n            this.afterLoadNextDomain(bound.end);\n            this.checkIfMaxDomainIsReached(this.getNextDomain().getTime(), bound.start);\n\n            return true;\n        }\n\n        /**\n         * Shift the calendar one domain backward\n         *\n         * The previous domain is loaded only if it's not beyond the minDate\n         *\n         * @param int n Number of domains to load\n         * @return bool True if the previous domain was loaded, else false\n         */\n        loadPreviousDomain(n) {\n            \"use strict\";\n\n            if (this._minDomainReached || n === 0) {\n                return false;\n            }\n\n            var bound = this.loadNewDomains(this.NAVIGATE_LEFT, this.getDomain(this.getDomainKeys()[0], -n).reverse());\n\n            this.afterLoadPreviousDomain(bound.start);\n            this.checkIfMinDomainIsReached(bound.start, bound.end);\n\n            return true;\n        }\n\n        loadNewDomains(direction, newDomains) {\n            \"use strict\";\n\n            var parent = this;\n            var backward = direction === this.NAVIGATE_LEFT;\n            var i = -1;\n            var total = newDomains.length;\n            var domains = this.getDomainKeys();\n\n            function buildSubDomain(d) {\n                return { t: parent._domainType[parent.options.subDomain].extractUnit(d), v: null };\n            }\n\n            // Remove out of bound domains from list of new domains to prepend\n            while (++i < total) {\n                if (backward && this.minDomainIsReached(newDomains[i])) {\n                    newDomains = newDomains.slice(0, i + 1);\n                    break;\n                }\n                if (!backward && this.maxDomainIsReached(newDomains[i])) {\n                    newDomains = newDomains.slice(0, i);\n                    break;\n                }\n            }\n\n            newDomains = newDomains.slice(-this.options.range);\n\n            for (i = 0, total = newDomains.length; i < total; i++) {\n                this._domains.set(\n                    newDomains[i].getTime(),\n                    this.getSubDomain(newDomains[i]).map(buildSubDomain)\n                );\n\n                this._domains.remove(backward ? domains.pop() : domains.shift());\n            }\n\n            domains = this.getDomainKeys();\n\n            if (backward) {\n                newDomains = newDomains.reverse();\n            }\n\n            this.paint(direction);\n\n            this.getDatas(\n                this.options.data,\n                newDomains[0],\n                this.getSubDomain(newDomains[newDomains.length - 1]).pop(),\n                function() {\n                    parent.fill(parent.lastInsertedSvg);\n                }\n            );\n\n            return {\n                start: newDomains[backward ? 0 : 1],\n                end: domains[domains.length - 1]\n            };\n        }\n\n        /**\n         * Return whether a date is inside the scope determined by maxDate\n         *\n         * @param int datetimestamp The timestamp in ms to test\n         * @return bool True if the specified date correspond to the calendar upper bound\n         */\n        maxDomainIsReached(datetimestamp) {\n            \"use strict\";\n\n            return (this.options.maxDate !== null && (this.options.maxDate.getTime() < datetimestamp));\n        }\n\n        /**\n         * Return whether a date is inside the scope determined by minDate\n         *\n         * @param int datetimestamp The timestamp in ms to test\n         * @return bool True if the specified date correspond to the calendar lower bound\n         */\n        minDomainIsReached(datetimestamp) {\n            \"use strict\";\n\n            return (this.options.minDate !== null && (this.options.minDate.getTime() >= datetimestamp));\n        }\n\n        /**\n         * Return the list of the calendar's domain timestamp\n         *\n         * @return Array a sorted array of timestamp\n         */\n        getDomainKeys() {\n            \"use strict\";\n\n            return this._domains.keys()\n                .map(function(d) {\n                    return parseInt(d, 10);\n                })\n                .sort(function(a, b) {\n                    return a - b;\n                });\n        }\n\n        // =========================================================================//\n        // POSITIONNING\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\n        // =========================================================================//\n\n        positionSubDomainX(d) {\n            \"use strict\";\n\n            var index = this._domainType[this.options.subDomain].position.x(new Date(d));\n            return index * this.options.cellSize + index * this.options.cellPadding;\n        }\n\n        positionSubDomainY(d) {\n            \"use strict\";\n\n            var index = this._domainType[this.options.subDomain].position.y(new Date(d));\n            return index * this.options.cellSize + index * this.options.cellPadding;\n        }\n\n        getSubDomainColumnNumber(d) {\n            \"use strict\";\n\n            if (this.options.rowLimit > 0) {\n                var i = this._domainType[this.options.subDomain].maxItemNumber;\n                if (typeof i === \"function\") {\n                    i = i(d);\n                }\n                return Math.ceil(i / this.options.rowLimit);\n            }\n\n            var j = this._domainType[this.options.subDomain].defaultColumnNumber;\n            if (typeof j === \"function\") {\n                j = j(d);\n\n            }\n            return this.options.colLimit || j;\n        }\n\n        getSubDomainRowNumber(d) {\n            \"use strict\";\n\n            if (this.options.colLimit > 0) {\n                var i = this._domainType[this.options.subDomain].maxItemNumber;\n                if (typeof i === \"function\") {\n                    i = i(d);\n                }\n                return Math.ceil(i / this.options.colLimit);\n            }\n\n            var j = this._domainType[this.options.subDomain].defaultRowNumber;\n            if (typeof j === \"function\") {\n                j = j(d);\n\n            }\n            return this.options.rowLimit || j;\n        }\n\n        /**\n         * Return a classname if the specified date should be highlighted\n         *\n         * @param  timestamp date Date of the current subDomain\n         * @return String the highlight class\n         */\n        getHighlightClassName(d) {\n            \"use strict\";\n\n            d = new Date(d);\n\n            if (this.options.highlight.length > 0) {\n                for (var i in this.options.highlight) {\n                    if (this.dateIsEqual(this.options.highlight[i], d)) {\n                        return this.isNow(this.options.highlight[i]) ? \" highlight-now\" : \" highlight\";\n                    }\n                }\n            }\n            return \"\";\n        }\n\n        /**\n         * Return whether the specified date is now,\n         * according to the type of subdomain\n         *\n         * @param  Date d The date to compare\n         * @return bool True if the date correspond to a subdomain cell\n         */\n        isNow(d) {\n            \"use strict\";\n\n            return this.dateIsEqual(d, new Date());\n        }\n\n        /**\n         * Return whether 2 dates are equals\n         * This function is subdomain-aware,\n         * and dates comparison are dependent of the subdomain\n         *\n         * @param  Date dateA First date to compare\n         * @param  Date dateB Secon date to compare\n         * @return bool true if the 2 dates are equals\n         */\n        /* jshint maxcomplexity: false */\n        dateIsEqual(dateA, dateB) {\n            \"use strict\";\n\n            if (!(dateA instanceof Date)) {\n                dateA = new Date(dateA);\n            }\n\n            if (!(dateB instanceof Date)) {\n                dateB = new Date(dateB);\n            }\n\n            switch (this.options.subDomain) {\n                case \"x_min\":\n                case \"min\":\n                    return dateA.getFullYear() === dateB.getFullYear() &&\n                        dateA.getMonth() === dateB.getMonth() &&\n                        dateA.getDate() === dateB.getDate() &&\n                        dateA.getHours() === dateB.getHours() &&\n                        dateA.getMinutes() === dateB.getMinutes();\n                case \"x_hour\":\n                case \"hour\":\n                    return dateA.getFullYear() === dateB.getFullYear() &&\n                        dateA.getMonth() === dateB.getMonth() &&\n                        dateA.getDate() === dateB.getDate() &&\n                        dateA.getHours() === dateB.getHours();\n                case \"x_day\":\n                case \"day\":\n                    return dateA.getFullYear() === dateB.getFullYear() &&\n                        dateA.getMonth() === dateB.getMonth() &&\n                        dateA.getDate() === dateB.getDate();\n                case \"x_week\":\n                case \"week\":\n                    return dateA.getFullYear() === dateB.getFullYear() &&\n                        this.getWeekNumber(dateA) === this.getWeekNumber(dateB);\n                case \"x_month\":\n                case \"month\":\n                    return dateA.getFullYear() === dateB.getFullYear() &&\n                        dateA.getMonth() === dateB.getMonth();\n                default:\n                    return false;\n            }\n        }\n\n\n        /**\n         * Returns wether or not dateA is less than or equal to dateB. This function is subdomain aware.\n         * Performs automatic conversion of values.\n         * @param dateA may be a number or a Date\n         * @param dateB may be a number or a Date\n         * @returns {boolean}\n         */\n        dateIsLessThan(dateA, dateB) {\n            \"use strict\";\n\n            if (!(dateA instanceof Date)) {\n                dateA = new Date(dateA);\n            }\n\n            if (!(dateB instanceof Date)) {\n                dateB = new Date(dateB);\n            }\n\n\n            function normalizedMillis(date, subdomain) {\n                switch (subdomain) {\n                    case \"x_min\":\n                    case \"min\":\n                        return new Date(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes()).getTime();\n                    case \"x_hour\":\n                    case \"hour\":\n                        return new Date(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours()).getTime();\n                    case \"x_day\":\n                    case \"day\":\n                        return new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime();\n                    case \"x_week\":\n                    case \"week\":\n                    case \"x_month\":\n                    case \"month\":\n                        return new Date(date.getFullYear(), date.getMonth()).getTime();\n                    default:\n                        return date.getTime();\n                }\n            }\n\n            return normalizedMillis(dateA, this.options.subDomain) < normalizedMillis(dateB, this.options.subDomain);\n        }\n\n\n        // =========================================================================//\n        // DATE COMPUTATION\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\n        // =========================================================================//\n\n        /**\n         * Return the day of the year for the date\n         * @param\tDate\n         * @return  int Day of the year [1,366]\n         */\n        getDayOfYear() {\n        \treturn d3.timeFormat(\"%j\").apply(this, arguments);\n        }\n\n        /**\n         * Return the week number of the year\n         * Monday as the first day of the week\n         * @return int\tWeek number [0-53]\n         */\n        getWeekNumber(d) {\n            \"use strict\";\n\n            var f = this.options.weekStartOnMonday === true ? d3.timeFormat(\"%W\") : d3.timeFormat(\"%U\");\n            return f(d);\n        }\n\n        /**\n         * Return the week number, relative to its month\n         *\n         * @param  int|Date d Date or timestamp in milliseconds\n         * @return int Week number, relative to the month [0-5]\n         */\n        getMonthWeekNumber(d) {\n            \"use strict\";\n\n            if (typeof d === \"number\") {\n                d = new Date(d);\n            }\n\n            var monthFirstWeekNumber = this.getWeekNumber(new Date(d.getFullYear(), d.getMonth()));\n            return this.getWeekNumber(d) - monthFirstWeekNumber - 1;\n        }\n\n        /**\n         * Return the number of weeks in the dates' year\n         *\n         * @param  int|Date d Date or timestamp in milliseconds\n         * @return int Number of weeks in the date's year\n         */\n        getWeekNumberInYear(d) {\n            \"use strict\";\n\n            if (typeof d === \"number\") {\n                d = new Date(d);\n            }\n        }\n\n        /**\n         * Return the number of days in the date's month\n         *\n         * @param  int|Date d Date or timestamp in milliseconds\n         * @return int Number of days in the date's month\n         */\n        getDayCountInMonth(d) {\n            \"use strict\";\n\n            return this.getEndOfMonth(d).getDate();\n        }\n\n        /**\n         * Return the number of days in the date's year\n         *\n         * @param  int|Date d Date or timestamp in milliseconds\n         * @return int Number of days in the date's year\n         */\n        getDayCountInYear(d) {\n            \"use strict\";\n\n            if (typeof d === \"number\") {\n                d = new Date(d);\n            }\n            return (new Date(d.getFullYear(), 1, 29).getMonth() === 1) ? 366 : 365;\n        }\n\n        /**\n         * Get the weekday from a date\n         *\n         * Return the week day number (0-6) of a date,\n         * depending on whether the week start on monday or sunday\n         *\n         * @param  Date d\n         * @return int The week day number (0-6)\n         */\n        getWeekDay(d) {\n            \"use strict\";\n\n            if (this.options.weekStartOnMonday === false) {\n                return d.getDay();\n            }\n            return d.getDay() === 0 ? 6 : (d.getDay() - 1);\n        }\n\n        /**\n         * Get the last day of the month\n         * @param  Date|int\td\tDate or timestamp in milliseconds\n         * @return Date\t\t\tLast day of the month\n         */\n        getEndOfMonth(d) {\n            \"use strict\";\n\n            if (typeof d === \"number\") {\n                d = new Date(d);\n            }\n            return new Date(d.getFullYear(), d.getMonth() + 1, 0);\n        }\n\n        /**\n         *\n         * @param  Date date\n         * @param  int count\n         * @param  string step\n         * @return Date\n         */\n        jumpDate(date, count, step) {\n            \"use strict\";\n\n            var d = new Date(date);\n            switch (step) {\n                case \"hour\":\n                    d.setHours(d.getHours() + count);\n                    break;\n                case \"day\":\n                    d.setHours(d.getHours() + count * 24);\n                    break;\n                case \"week\":\n                    d.setHours(d.getHours() + count * 24 * 7);\n                    break;\n                case \"month\":\n                    d.setMonth(d.getMonth() + count);\n                    break;\n                case \"year\":\n                    d.setFullYear(d.getFullYear() + count);\n            }\n\n            return new Date(d);\n        }\n\n        // =========================================================================//\n        // DOMAIN COMPUTATION\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\n        // =========================================================================//\n\n        /**\n         * Return all the minutes between 2 dates\n         *\n         * @param  Date\td\tdate\tA date\n         * @param  int|date\trange\tNumber of minutes in the range, or a stop date\n         * @return array\tAn array of minutes\n         */\n        getMinuteDomain(d, range) {\n            \"use strict\";\n\n            var start = new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours());\n            var stop = null;\n            if (range instanceof Date) {\n                stop = new Date(range.getFullYear(), range.getMonth(), range.getDate(), range.getHours());\n            } else {\n                stop = new Date(+start + range * 1000 * 60);\n            }\n            return d3.timeMinutes(Math.min(start, stop), Math.max(start, stop));\n        }\n\n        /**\n         * Return all the hours between 2 dates\n         *\n         * @param  Date\td\tA date\n         * @param  int|date\trange\tNumber of hours in the range, or a stop date\n         * @return array\tAn array of hours\n         */\n        getHourDomain(d, range) {\n            \"use strict\";\n\n            var start = new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours());\n            var stop = null;\n            if (range instanceof Date) {\n                stop = new Date(range.getFullYear(), range.getMonth(), range.getDate(), range.getHours());\n            } else {\n                stop = new Date(start);\n                stop.setHours(stop.getHours() + range);\n            }\n\n            var domains = d3.timeHours(Math.min(start, stop), Math.max(start, stop));\n\n            // Passing from DST to standard time\n            // If there are 25 hours, let's compress the duplicate hours\n            var i = 0;\n            var total = domains.length;\n            for (i = 0; i < total; i++) {\n                if (i > 0 && (domains[i].getHours() === domains[i - 1].getHours())) {\n                    this.DSTDomain.push(domains[i].getTime());\n                    domains.splice(i, 1);\n                    break;\n                }\n            }\n\n            // d3.time.hours is returning more hours than needed when changing\n            // from DST to standard time, because there is really 2 hours between\n            // 1am and 2am!\n            if (typeof range === \"number\" && domains.length > Math.abs(range)) {\n                domains.splice(domains.length - 1, 1);\n            }\n\n            return domains;\n        }\n\n        /**\n         * Return all the days between 2 dates\n         *\n         * @param  Date\t\td\t\tA date\n         * @param  int|date\trange\tNumber of days in the range, or a stop date\n         * @return array\tAn array of weeks\n         */\n        getDayDomain(d, range) {\n            \"use strict\";\n\n            var start = new Date(d.getFullYear(), d.getMonth(), d.getDate());\n            var stop = null;\n            if (range instanceof Date) {\n                stop = new Date(range.getFullYear(), range.getMonth(), range.getDate());\n            } else {\n                stop = new Date(start);\n                stop = new Date(stop.setDate(stop.getDate() + parseInt(range, 10)));\n            }\n\n            return d3.timeDays(Math.min(start, stop), Math.max(start, stop));\n        }\n\n        /**\n         * Return all the weeks between 2 dates\n         *\n         * @param  Date\td\tA date\n         * @param  int|date\trange\tNumber of minutes in the range, or a stop date\n         * @return array\tAn array of weeks\n         */\n        getWeekDomain(d, range) {\n            \"use strict\";\n\n            var weekStart;\n\n            if (this.options.weekStartOnMonday === false) {\n                weekStart = new Date(d.getFullYear(), d.getMonth(), d.getDate() - d.getDay());\n            } else {\n                if (d.getDay() === 1) {\n                    weekStart = new Date(d.getFullYear(), d.getMonth(), d.getDate());\n                } else if (d.getDay() === 0) {\n                    weekStart = new Date(d.getFullYear(), d.getMonth(), d.getDate());\n                    weekStart.setDate(weekStart.getDate() - 6);\n                } else {\n                    weekStart = new Date(d.getFullYear(), d.getMonth(), d.getDate() - d.getDay() + 1);\n                }\n            }\n\n            var endDate = new Date(weekStart);\n\n            var stop = range;\n            if (typeof range !== \"object\") {\n                stop = new Date(endDate.setDate(endDate.getDate() + range * 7));\n            }\n\n            return (this.options.weekStartOnMonday === true) ?\n                d3.timeMondays(Math.min(weekStart, stop), Math.max(weekStart, stop)) :\n                d3.timeSundays(Math.min(weekStart, stop), Math.max(weekStart, stop));\n        }\n\n        /**\n         * Return all the months between 2 dates\n         *\n         * @param  Date\t\td\t\tA date\n         * @param  int|date\trange\tNumber of months in the range, or a stop date\n         * @return array\tAn array of months\n         */\n        getMonthDomain(d, range) {\n            \"use strict\";\n\n            var start = new Date(d.getFullYear(), d.getMonth());\n            var stop = null;\n            if (range instanceof Date) {\n                stop = new Date(range.getFullYear(), range.getMonth());\n            } else {\n                stop = new Date(start);\n                stop = stop.setMonth(stop.getMonth() + range);\n            }\n\n            return d3.timeMonths(Math.min(start, stop), Math.max(start, stop));\n        }\n\n        /**\n         * Return all the years between 2 dates\n         *\n         * @param  Date\td\tdate\tA date\n         * @param  int|date\trange\tNumber of minutes in the range, or a stop date\n         * @return array\tAn array of hours\n         */\n        getYearDomain(d, range) {\n            \"use strict\";\n\n            var start = new Date(d.getFullYear(), 0);\n            var stop = null;\n            if (range instanceof Date) {\n                stop = new Date(range.getFullYear(), 0);\n            } else {\n                stop = new Date(d.getFullYear() + range, 0);\n            }\n\n            return d3.timeYears(Math.min(start, stop), Math.max(start, stop));\n        }\n\n        /**\n         * Get an array of domain start dates\n         *\n         * @param  int|Date date A random date included in the wanted domain\n         * @param  int|Date range Number of dates to get, or a stop date\n         * @return Array of dates\n         */\n        getDomain(date, range) {\n            \"use strict\";\n\n            if (typeof date === \"number\") {\n                date = new Date(date);\n            }\n\n            if (arguments.length < 2) {\n                range = this.options.range;\n            }\n\n            switch (this.options.domain) {\n                case \"hour\":\n                    var domains = this.getHourDomain(date, range);\n\n                    // Case where an hour is missing, when passing from standard time to DST\n                    // Missing hour is perfectly acceptabl in subDomain, but not in domains\n                    if (typeof range === \"number\" && domains.length < range) {\n                        if (range > 0) {\n                            domains.push(this.getHourDomain(domains[domains.length - 1], 2)[1]);\n                        } else {\n                            domains.shift(this.getHourDomain(domains[0], -2)[0]);\n                        }\n                    }\n                    return domains;\n                case \"day\":\n                    return this.getDayDomain(date, range);\n                case \"week\":\n                    return this.getWeekDomain(date, range);\n                case \"month\":\n                    return this.getMonthDomain(date, range);\n                case \"year\":\n                    return this.getYearDomain(date, range);\n            }\n        }\n\n        /* jshint maxcomplexity: false */\n        getSubDomain(date) {\n            \"use strict\";\n\n            if (typeof date === \"number\") {\n                date = new Date(date);\n            }\n\n            var parent = this;\n\n            /**\n             * @return int\n             */\n            var computeDaySubDomainSize = function(date, domain) {\n                switch (domain) {\n                    case \"year\":\n                        return parent.getDayCountInYear(date);\n                    case \"month\":\n                        return parent.getDayCountInMonth(date);\n                    case \"week\":\n                        return 7;\n                }\n            };\n\n            /**\n             * @return int\n             */\n            var computeMinSubDomainSize = function(date, domain) {\n                switch (domain) {\n                    case \"hour\":\n                        return 60;\n                    case \"day\":\n                        return 60 * 24;\n                    case \"week\":\n                        return 60 * 24 * 7;\n                }\n            };\n\n            /**\n             * @return int\n             */\n            var computeHourSubDomainSize = function(date, domain) {\n                switch (domain) {\n                    case \"day\":\n                        return 24;\n                    case \"week\":\n                        return 168;\n                    case \"month\":\n                        return parent.getDayCountInMonth(date) * 24;\n                }\n            };\n\n            /**\n             * @return int\n             */\n            var computeWeekSubDomainSize = function(date, domain) {\n                if (domain === \"month\") {\n                    var endOfMonth = new Date(date.getFullYear(), date.getMonth() + 1, 0);\n                    var endWeekNb = parent.getWeekNumber(endOfMonth);\n                    var startWeekNb = parent.getWeekNumber(new Date(date.getFullYear(), date.getMonth()));\n\n                    if (startWeekNb > endWeekNb) {\n                        startWeekNb = 0;\n                        endWeekNb++;\n                    }\n\n                    return endWeekNb - startWeekNb + 1;\n                } else if (domain === \"year\") {\n                    return parent.getWeekNumber(new Date(date.getFullYear(), 11, 31));\n                }\n            };\n\n            switch (this.options.subDomain) {\n                case \"x_min\":\n                case \"min\":\n                    return this.getMinuteDomain(date, computeMinSubDomainSize(date, this.options.domain));\n                case \"x_hour\":\n                case \"hour\":\n                    return this.getHourDomain(date, computeHourSubDomainSize(date, this.options.domain));\n                case \"x_day\":\n                case \"day\":\n                    return this.getDayDomain(date, computeDaySubDomainSize(date, this.options.domain));\n                case \"x_week\":\n                case \"week\":\n                    return this.getWeekDomain(date, computeWeekSubDomainSize(date, this.options.domain));\n                case \"x_month\":\n                case \"month\":\n                    return this.getMonthDomain(date, 12);\n            }\n        }\n\n        /**\n         * Get the n-th next domain after the calendar newest (rightmost) domain\n         * @param  int n\n         * @return Date The start date of the wanted domain\n         */\n        getNextDomain(n) {\n            \"use strict\";\n\n            if (arguments.length === 0) {\n                n = 1;\n            }\n            return this.getDomain(this.jumpDate(this.getDomainKeys().pop(), n, this.options.domain), 1)[0];\n        }\n\n        /**\n         * Get the n-th domain before the calendar oldest (leftmost) domain\n         * @param  int n\n         * @return Date The start date of the wanted domain\n         */\n        getPreviousDomain(n) {\n            \"use strict\";\n\n            if (arguments.length === 0) {\n                n = 1;\n            }\n            return this.getDomain(this.jumpDate(this.getDomainKeys().shift(), -n, this.options.domain), 1)[0];\n        }\n\n\n        // =========================================================================//\n        // DATAS\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\n        // =========================================================================//\n\n        /**\n         * Fetch and interpret data from the datasource\n         *\n         * @param string|object source\n         * @param Date startDate\n         * @param Date endDate\n         * @param function callback\n         * @param function|boolean afterLoad function used to convert the data into a json object. Use true to use the afterLoad callback\n         * @param updateMode\n         *\n         * @return mixed\n         * - True if there are no data to load\n         * - False if data are loaded asynchronously\n         */\n        getDatas(source, startDate, endDate, callback, afterLoad, updateMode) {\n            \"use strict\";\n\n            var self = this;\n            if (arguments.length < 5) {\n                afterLoad = true;\n            }\n            if (arguments.length < 6) {\n                updateMode = this.APPEND_ON_UPDATE;\n            }\n            var _callback = function(data) {\n                if (afterLoad !== false) {\n                    if (typeof afterLoad === \"function\") {\n                        data = afterLoad(data);\n                    } else if (typeof(self.options.afterLoadData) === \"function\") {\n                        data = self.options.afterLoadData(data);\n                    } else {\n                        console.log(\"Provided callback for afterLoadData is not a function.\");\n                    }\n                } else if (self.options.dataType === \"csv\" || self.options.dataType === \"tsv\") {\n                    data = this.interpretCSV(data);\n                }\n                self.parseDatas(data, updateMode, startDate, endDate);\n                if (typeof callback === \"function\") {\n                    callback();\n                }\n            };\n\n            switch (typeof source) {\n                case \"string\":\n                    if (source === \"\") {\n                        _callback({});\n                        return true;\n                    } else {\n                        var url = this.parseURI(source, startDate, endDate);\n                        var requestType = \"GET\";\n                        if (self.options.dataPostPayload !== null) {\n                            requestType = \"POST\";\n                        }\n                        var payload = null;\n                        if (self.options.dataPostPayload !== null) {\n                            payload = this.parseURI(self.options.dataPostPayload, startDate, endDate);\n                        }\n\n                        switch (this.options.dataType) {\n                            case \"json\":\n                                d3.json(url, _callback).send(requestType, payload);\n                                break;\n                            case \"csv\":\n                                d3.csv(url, _callback).send(requestType, payload);\n                                break;\n                            case \"tsv\":\n                                d3.tsv(url, _callback).send(requestType, payload);\n                                break;\n                            case \"txt\":\n                                d3.text(url, _callback).send(requestType, payload);\n                                break;\n                        }\n                    }\n                    return false;\n                case \"object\":\n                    if (source === Object(source)) {\n                        _callback(source);\n                        return false;\n                    }\n                    /* falls through */\n                default:\n                    _callback({});\n                    return true;\n            }\n        }\n\n        /**\n         * Populate the calendar internal data\n         *\n         * @param object data\n         * @param constant updateMode\n         * @param Date startDate\n         * @param Date endDate\n         *\n         * @return void\n         */\n        parseDatas(data, updateMode, startDate, endDate) {\n            \"use strict\";\n\n            if (updateMode === this.RESET_ALL_ON_UPDATE) {\n                this._domains.forEach(function(key, value) {\n                    value.forEach(function(element, index, array) {\n                        array[index].v = null;\n                    });\n                });\n            }\n\n            var temp = {};\n\n            var extractTime = function(d) {\n                return d.t;\n            };\n\n            /*jshint forin:false */\n            for (var d in data) {\n                var date = new Date(d * 1000);\n                var domainUnit = this.getDomain(date)[0].getTime();\n\n                // The current data belongs to a domain that was compressed\n                // Compress the data for the two duplicate hours into the same hour\n                if (this.DSTDomain.indexOf(domainUnit) >= 0) {\n\n                    // Re-assign all data to the first or the second duplicate hours\n                    // depending on which is visible\n                    if (this._domains.has(domainUnit - 3600 * 1000)) {\n                        domainUnit -= 3600 * 1000;\n                    }\n                }\n\n                // Skip if data is not relevant to current domain\n                if (isNaN(d) || !data.hasOwnProperty(d) || !this._domains.has(domainUnit) || !(domainUnit >= +startDate && domainUnit < +endDate)) {\n                    continue;\n                }\n\n                var subDomainsData = this._domains.get(domainUnit);\n\n                if (!temp.hasOwnProperty(domainUnit)) {\n                    temp[domainUnit] = subDomainsData.map(extractTime);\n                }\n\n                var index = temp[domainUnit].indexOf(this._domainType[this.options.subDomain].extractUnit(date));\n\n                if (updateMode === this.RESET_SINGLE_ON_UPDATE) {\n                    subDomainsData[index].v = data[d];\n                } else {\n                    if (!isNaN(subDomainsData[index].v)) {\n                        subDomainsData[index].v += data[d];\n                    } else {\n                        subDomainsData[index].v = data[d];\n                    }\n                }\n            }\n        }\n\n        parseURI(str, startDate, endDate) {\n            \"use strict\";\n\n            // Use a timestamp in seconds\n            str = str.replace(/\\{\\{t:start\\}\\}/g, startDate.getTime() / 1000);\n            str = str.replace(/\\{\\{t:end\\}\\}/g, endDate.getTime() / 1000);\n\n            // Use a string date, following the ISO-8601\n            str = str.replace(/\\{\\{d:start\\}\\}/g, startDate.toISOString());\n            str = str.replace(/\\{\\{d:end\\}\\}/g, endDate.toISOString());\n\n            return str;\n        }\n\n        interpretCSV(data) {\n            \"use strict\";\n\n            var d = {};\n            var keys = Object.keys(data[0]);\n            var i, total;\n            for (i = 0, total = data.length; i < total; i++) {\n                d[data[i][keys[0]]] = +data[i][keys[1]];\n            }\n            return d;\n        }\n\n        /**\n         * Handle the calendar layout and dimension\n         *\n         * Expand and shrink the container depending on its children dimension\n         * Also rearrange the children position depending on their dimension,\n         * and the legend position\n         *\n         * @return void\n         */\n        resize() {\n            \"use strict\";\n\n            var parent = this;\n            var options = parent.options;\n            var legendWidth = options.displayLegend ? (parent.Legend.getDim(\"width\") + options.legendMargin[1] + options.legendMargin[3]) : 0;\n            var legendHeight = options.displayLegend ? (parent.Legend.getDim(\"height\") + options.legendMargin[0] + options.legendMargin[2]) : 0;\n\n            var graphWidth = parent.graphDim.width - options.domainGutter - options.cellPadding;\n            var graphHeight = parent.graphDim.height - options.domainGutter - options.cellPadding;\n\n            this.root.transition().duration(options.animationDuration)\n                .attr(\"width\", function() {\n                    if (options.legendVerticalPosition === \"middle\" || options.legendVerticalPosition === \"center\") {\n                        return graphWidth + legendWidth;\n                    }\n                    return Math.max(graphWidth, legendWidth);\n                })\n                .attr(\"height\", function() {\n                    if (options.legendVerticalPosition === \"middle\" || options.legendVerticalPosition === \"center\") {\n                        return Math.max(graphHeight, legendHeight);\n                    }\n                    return graphHeight + legendHeight;\n                });\n\n            this.root.select(\".graph\").transition().duration(options.animationDuration)\n                .attr(\"y\", function() {\n                    if (options.legendVerticalPosition === \"top\") {\n                        return legendHeight;\n                    }\n                    return 0;\n                })\n                .attr(\"x\", function() {\n                    if (\n                        (options.legendVerticalPosition === \"middle\" || options.legendVerticalPosition === \"center\") &&\n                        options.legendHorizontalPosition === \"left\") {\n                        return legendWidth;\n                    }\n                    return 0;\n\n                });\n        }\n\n        // =========================================================================//\n        // PUBLIC API\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\n        // =========================================================================//\n\n        /**\n         * Shift the calendar forward\n         */\n        next(n) {\n            \"use strict\";\n\n            if (arguments.length === 0) {\n                n = 1;\n            }\n            return this.loadNextDomain(n);\n        }\n\n        /**\n         * Shift the calendar backward\n         */\n        previous(n) {\n            \"use strict\";\n\n            if (arguments.length === 0) {\n                n = 1;\n            }\n            return this.loadPreviousDomain(n);\n        }\n\n        /**\n         * Jump directly to a specific date\n         *\n         * JumpTo will scroll the calendar until the wanted domain with the specified\n         * date is visible. Unless you set reset to true, the wanted domain\n         * will not necessarily be the first (leftmost) domain of the calendar.\n         *\n         * @param Date date Jump to the domain containing that date\n         * @param bool reset Whether the wanted domain should be the first domain of the calendar\n         * @param bool True of the calendar was scrolled\n         */\n        jumpTo(date, reset) {\n            \"use strict\";\n\n            if (arguments.length < 2) {\n                reset = false;\n            }\n            var domains = this.getDomainKeys();\n            var firstDomain = domains[0];\n            var lastDomain = domains[domains.length - 1];\n\n            if (date < firstDomain) {\n                return this.loadPreviousDomain(this.getDomain(firstDomain, date).length);\n            } else {\n                if (reset) {\n                    return this.loadNextDomain(this.getDomain(firstDomain, date).length);\n                }\n\n                if (date > lastDomain) {\n                    return this.loadNextDomain(this.getDomain(lastDomain, date).length);\n                }\n            }\n\n            return false;\n        }\n\n        /**\n         * Navigate back to the start date\n         *\n         * @since  3.3.8\n         * @return void\n         */\n        rewind() {\n            \"use strict\";\n\n            this.jumpTo(this.options.start, true);\n        }\n\n        /**\n         * Update the calendar with new data\n         *\n         * @param  object|string\t\tdataSource\t\tThe calendar's datasource, same type as this.options.data\n         * @param  boolean|function\t\tafterLoad\t\tWhether to execute afterLoad() on the data. Pass directly a function\n         * if you don't want to use the afterLoad() callback\n         */\n        update(dataSource, afterLoad, updateMode) {\n            \"use strict\";\n\n            if (arguments.length < 2) {\n                afterLoad = true;\n            }\n            if (arguments.length < 3) {\n                updateMode = this.RESET_ALL_ON_UPDATE;\n            }\n\n            var domains = this.getDomainKeys();\n            var self = this;\n            this.getDatas(\n                dataSource,\n                new Date(domains[0]),\n                this.getSubDomain(domains[domains.length - 1]).pop(),\n                function() {\n                    self.fill();\n                },\n                afterLoad,\n                updateMode\n            );\n        }\n\n        /**\n         * Set the legend\n         *\n         * @param array legend an array of integer, representing the different threshold value\n         * @param array colorRange an array of 2 hex colors, for the minimum and maximum colors\n         */\n        setLegend() {\n            \"use strict\";\n\n            var oldLegend = this.options.legend.slice(0);\n            if (arguments.length >= 1 && Array.isArray(arguments[0])) {\n                this.options.legend = arguments[0];\n            }\n            if (arguments.length >= 2) {\n                if (Array.isArray(arguments[1]) && arguments[1].length >= 2) {\n                    this.options.legendColors = [arguments[1][0], arguments[1][1]];\n                } else {\n                    this.options.legendColors = arguments[1];\n                }\n            }\n\n            if ((arguments.length > 0 && !arrayEquals(oldLegend, this.options.legend)) || arguments.length >= 2) {\n                this.Legend.buildColors();\n                this.fill();\n            }\n\n            this.Legend.redraw(this.graphDim.width - this.options.domainGutter - this.options.cellPadding);\n        }\n\n        /**\n         * Remove the legend\n         *\n         * @return bool False if there is no legend to remove\n         */\n        removeLegend() {\n            \"use strict\";\n\n            if (!this.options.displayLegend) {\n                return false;\n            }\n            this.options.displayLegend = false;\n            this.Legend.remove();\n            return true;\n        }\n\n        /**\n         * Display the legend\n         *\n         * @return bool False if the legend was already displayed\n         */\n        showLegend() {\n            \"use strict\";\n\n            if (this.options.displayLegend) {\n                return false;\n            }\n            this.options.displayLegend = true;\n            this.Legend.redraw(this.graphDim.width - this.options.domainGutter - this.options.cellPadding);\n            return true;\n        }\n\n        /**\n         * Highlight dates\n         *\n         * Add a highlight class to a set of dates\n         *\n         * @since  3.3.5\n         * @param  array Array of dates to highlight\n         * @return bool True if dates were highlighted\n         */\n        highlight(args) {\n            \"use strict\";\n\n            if ((this.options.highlight = this.expandDateSetting(args)).length > 0) {\n                this.fill();\n                return true;\n            }\n            return false;\n        }\n\n        /**\n         * Destroy the calendar\n         *\n         * Usage: cal = cal.destroy();\n         *\n         * @since  3.3.6\n         * @param function A callback function to trigger after destroying the calendar\n         * @return null\n         */\n        destroy(callback) {\n            \"use strict\";\n\n            this.root.transition().duration(this.options.animationDuration)\n                .attr(\"width\", 0)\n                .attr(\"height\", 0)\n                .remove()\n                .each(function() {\n                    if (typeof callback === \"function\") {\n                        callback();\n                    } else if (typeof callback !== \"undefined\") {\n                        console.log(\"Provided callback for destroy() is not a function.\");\n                    }\n                });\n\n            return null;\n        }\n\n        getSVG() {\n            \"use strict\";\n\n            var styles = {\n                \".cal-heatmap-container\": {},\n                \".graph\": {},\n                \".graph-rect\": {},\n                \"rect.highlight\": {},\n                \"rect.now\": {},\n                \"rect.highlight-now\": {},\n                \"text.highlight\": {},\n                \"text.now\": {},\n                \"text.highlight-now\": {},\n                \".domain-background\": {},\n                \".graph-label\": {},\n                \".subdomain-text\": {},\n                \".q0\": {},\n                \".qi\": {}\n            };\n\n            for (var j = 1, total = this.options.legend.length + 1; j <= total; j++) {\n                styles[\".q\" + j] = {};\n            }\n\n            var root = this.root;\n\n            var whitelistStyles = [\n                // SVG specific properties\n                \"stroke\", \"stroke-width\", \"stroke-opacity\", \"stroke-dasharray\", \"stroke-dashoffset\", \"stroke-linecap\", \"stroke-miterlimit\",\n                \"fill\", \"fill-opacity\", \"fill-rule\",\n                \"marker\", \"marker-start\", \"marker-mid\", \"marker-end\",\n                \"alignement-baseline\", \"baseline-shift\", \"dominant-baseline\", \"glyph-orientation-horizontal\", \"glyph-orientation-vertical\", \"kerning\", \"text-anchor\",\n                \"shape-rendering\",\n\n                // Text Specific properties\n                \"text-transform\", \"font-family\", \"font\", \"font-size\", \"font-weight\"\n            ];\n\n            var filterStyles = function(attribute, property, value) {\n                if (whitelistStyles.indexOf(property) !== -1) {\n                    styles[attribute][property] = value;\n                }\n            };\n\n            var getElement = function(e) {\n                return root.select(e).node();\n            };\n\n            /* jshint forin:false */\n            for (var element in styles) {\n                if (!styles.hasOwnProperty(element)) {\n                    continue;\n                }\n\n                var dom = getElement(element);\n\n                if (dom === null) {\n                    continue;\n                }\n\n                // The DOM Level 2 CSS way\n                /* jshint maxdepth: false */\n                if (\"getComputedStyle\" in window) {\n                    var cs = getComputedStyle(dom, null);\n                    if (cs.length !== 0) {\n                        for (var i = 0; i < cs.length; i++) {\n                            filterStyles(element, cs.item(i), cs.getPropertyValue(cs.item(i)));\n                        }\n\n                        // Opera workaround. Opera doesn\"t support `item`/`length`\n                        // on CSSStyleDeclaration.\n                    } else {\n                        for (var k in cs) {\n                            if (cs.hasOwnProperty(k)) {\n                                filterStyles(element, k, cs[k]);\n                            }\n                        }\n                    }\n\n                    // The IE way\n                } else if (\"currentStyle\" in dom) {\n                    var css = dom.currentStyle;\n                    for (var p in css) {\n                        filterStyles(element, p, css[p]);\n                    }\n                }\n            }\n\n            var string = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" \" +\n                \"xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"><style type=\\\"text/css\\\"><![CDATA[ \";\n\n            for (var style in styles) {\n                string += style + \" {\\n\";\n                for (var l in styles[style]) {\n                    string += \"\\t\" + l + \":\" + styles[style][l] + \";\\n\";\n                }\n                string += \"}\\n\";\n            }\n\n            string += \"]]></style>\";\n            string += new XMLSerializer().serializeToString(this.root.node());\n            string += \"</svg>\";\n\n            return string;\n        }\n}\n\n// =========================================================================//\n// DOMAIN POSITION COMPUTATION\t\t\t\t\t\t\t\t\t\t\t\t//\n// =========================================================================//\n\n/**\n * Compute the position of a domain, relative to the calendar\n */\nclass DomainPosition {\n    constructor() {\n        \"use strict\";\n\n        this.positions = d3.map();\n    }\n\n    getPosition(d) {\n        \"use strict\";\n\n        return this.positions.get(d);\n    }\n\n    getPositionFromIndex(i) {\n        \"use strict\";\n\n        var domains = this.getKeys();\n        return this.positions.get(domains[i]);\n    }\n\n    getLast() {\n        \"use strict\";\n\n        var domains = this.getKeys();\n        return this.positions.get(domains[domains.length - 1]);\n    }\n\n    setPosition(d, dim) {\n        \"use strict\";\n\n        this.positions.set(d, dim);\n    }\n\n    shiftRightBy(exitingDomainDim) {\n        \"use strict\";\n\n        this.positions.each(function(key, value, map) {\n            map.set(key, value - exitingDomainDim);\n        });\n\n        var domains = this.getKeys();\n        this.positions.remove(domains[0]);\n    }\n\n    shiftLeftBy(enteringDomainDim) {\n        \"use strict\";\n\n        this.positions.each(function(key, value, map) {\n            map.set(key, value + enteringDomainDim);\n        });\n\n        var domains = this.getKeys();\n        this.positions.remove(domains[domains.length - 1]);\n    }\n\n    getKeys() {\n        \"use strict\";\n\n        return this.positions.keys().sort(function(a, b) {\n            return parseInt(a, 10) - parseInt(b, 10);\n        });\n    }\n}\n\n// =========================================================================//\n// LEGEND\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\n// =========================================================================//\n\nclass Legend {\n    constructor(calendar) {\n        \"use strict\";\n\n        this.calendar = calendar;\n        this.computeDim();\n\n        if (calendar.options.legendColors !== null) {\n            this.buildColors();\n        }\n    }\n\n    computeDim() {\n        \"use strict\";\n\n        var options = this.calendar.options; // Shorter accessor for variable name mangling when minifying\n        this.dim = {\n            width: options.legendCellSize * (options.legend.length + 1) +\n                options.legendCellPadding * (options.legend.length),\n            height: options.legendCellSize\n        };\n    }\n\n    remove() {\n        \"use strict\";\n\n        this.calendar.root.select(\".graph-legend\").remove();\n        this.calendar.resize();\n    }\n\n    redraw(width) {\n        \"use strict\";\n\n        if (!this.calendar.options.displayLegend) {\n            return false;\n        }\n\n        var parent = this;\n        var calendar = this.calendar;\n        var legend = calendar.root;\n        var legendItem;\n        var options = calendar.options; // Shorter accessor for variable name mangling when minifying\n\n        this.computeDim();\n\n        var _legend = options.legend.slice(0);\n        _legend.push(_legend[_legend.length - 1] + 1);\n\n        var legendElement = calendar.root.select(\".graph-legend\");\n        if (legendElement.node() !== null) {\n            legend = legendElement;\n            legendItem = legend\n                .select(\"g\")\n                .selectAll(\"rect\").data(_legend);\n        } else {\n            // Creating the new legend DOM if it doesn't already exist\n            legend = options.legendVerticalPosition === \"top\" ? legend.insert(\"svg\", \".graph\") : legend.append(\"svg\");\n\n            legend\n                .attr(\"x\", getLegendXPosition())\n                .attr(\"y\", getLegendYPosition());\n\n            legendItem = legend\n                .attr(\"class\", \"graph-legend\")\n                .attr(\"height\", parent.getDim(\"height\"))\n                .attr(\"width\", parent.getDim(\"width\"))\n                .append(\"g\")\n                .selectAll().data(_legend);\n        }\n\n        legendItem\n            .enter()\n            .append(\"rect\")\n            .call(legendCellLayout)\n            .attr(\"class\", function(d) {\n                return calendar.Legend.getClass(d, (calendar.legendScale === null));\n            })\n            .attr(\"fill-opacity\", 0)\n            .call(function(selection) {\n                if (calendar.legendScale !== null && options.legendColors !== null && options.legendColors.hasOwnProperty(\"base\")) {\n                    selection.attr(\"fill\", options.legendColors.base);\n                }\n            })\n            .append(\"title\");\n\n        legendItem.exit().transition().duration(options.animationDuration)\n            .attr(\"fill-opacity\", 0)\n            .remove();\n\n        legendItem.transition().delay(function(d, i) {\n                return options.animationDuration * i / 10;\n            })\n            .call(legendCellLayout)\n            .attr(\"fill-opacity\", 1)\n            .call(function(element) {\n                element.attr(\"fill\", function(d, i) {\n                    if (calendar.legendScale === null) {\n                        return \"\";\n                    }\n\n                    if (i === 0) {\n                        return calendar.legendScale(d - 1);\n                    }\n                    return calendar.legendScale(options.legend[i - 1]);\n                });\n\n                element.attr(\"class\", function(d) {\n                    return calendar.Legend.getClass(d, (calendar.legendScale === null));\n                });\n            });\n\n        function legendCellLayout(selection) {\n            selection\n                .attr(\"width\", options.legendCellSize)\n                .attr(\"height\", options.legendCellSize)\n                .attr(\"x\", function(d, i) {\n                    return i * (options.legendCellSize + options.legendCellPadding);\n                });\n        }\n\n        legendItem.select(\"title\").text(function(d, i) {\n            if (i === 0) {\n                return calendar.formatStringWithObject(options.legendTitleFormat.lower, {\n                    min: options.legend[i],\n                    name: options.itemName[1]\n                });\n            } else if (i === _legend.length - 1) {\n                return calendar.formatStringWithObject(options.legendTitleFormat.upper, {\n                    max: options.legend[i - 1],\n                    name: options.itemName[1]\n                });\n            } else {\n                return calendar.formatStringWithObject(options.legendTitleFormat.inner, {\n                    down: options.legend[i - 1],\n                    up: options.legend[i],\n                    name: options.itemName[1]\n                });\n            }\n        });\n\n        legend.transition().duration(options.animationDuration)\n            .attr(\"x\", getLegendXPosition())\n            .attr(\"y\", getLegendYPosition())\n            .attr(\"width\", parent.getDim(\"width\"))\n            .attr(\"height\", parent.getDim(\"height\"));\n\n        legend.select(\"g\").transition().duration(options.animationDuration)\n            .attr(\"transform\", function() {\n                if (options.legendOrientation === \"vertical\") {\n                    return \"rotate(90 \" + options.legendCellSize / 2 + \" \" + options.legendCellSize / 2 + \")\";\n                }\n                return \"\";\n            });\n\n        function getLegendXPosition() {\n            switch (options.legendHorizontalPosition) {\n                case \"right\":\n                    if (options.legendVerticalPosition === \"center\" || options.legendVerticalPosition === \"middle\") {\n                        return width + options.legendMargin[3];\n                    }\n                    return width - parent.getDim(\"width\") - options.legendMargin[1];\n                case \"middle\":\n                case \"center\":\n                    return Math.round(width / 2 - parent.getDim(\"width\") / 2);\n                default:\n                    return options.legendMargin[3];\n            }\n        }\n\n        function getLegendYPosition() {\n            if (options.legendVerticalPosition === \"bottom\") {\n                return calendar.graphDim.height + options.legendMargin[0] - options.domainGutter - options.cellPadding;\n            }\n            return options.legendMargin[0];\n        }\n\n        calendar.resize();\n    }\n\n    /**\n     * Return the dimension of the legend\n     *\n     * Takes into account rotation\n     *\n     * @param  string axis Width or height\n     * @return int height or width in pixels\n     */\n    getDim(axis) {\n        \"use strict\";\n\n        var isHorizontal = (this.calendar.options.legendOrientation === \"horizontal\");\n\n        switch (axis) {\n            case \"width\":\n                return this.dim[isHorizontal ? \"width\" : \"height\"];\n            case \"height\":\n                return this.dim[isHorizontal ? \"height\" : \"width\"];\n        }\n    }\n\n    buildColors() {\n        \"use strict\";\n\n        var options = this.calendar.options; // Shorter accessor for variable name mangling when minifying\n\n        if (options.legendColors === null) {\n            this.calendar.legendScale = null;\n            return false;\n        }\n\n        var _colorRange = [];\n\n        if (Array.isArray(options.legendColors)) {\n            _colorRange = options.legendColors;\n        } else if (options.legendColors.hasOwnProperty(\"min\") && options.legendColors.hasOwnProperty(\"max\")) {\n            _colorRange = [options.legendColors.min, options.legendColors.max];\n        } else {\n            options.legendColors = null;\n            return false;\n        }\n\n        var _legend = options.legend.slice(0);\n\n        if (_legend[0] > 0) {\n            _legend.unshift(0);\n        } else if (_legend[0] < 0) {\n            // Let's guess the leftmost value, it we have to add one\n            _legend.unshift(_legend[0] - (_legend[_legend.length - 1] - _legend[0]) / _legend.length);\n        }\n\n        var colorScale = d3.scaleLinear()\n            .range(_colorRange)\n            .interpolate(d3.interpolateHcl)\n            .domain([d3.min(_legend), d3.max(_legend)]);\n\n        var legendColors = _legend.map(function(element) {\n            return colorScale(element);\n        });\n        this.calendar.legendScale = d3.scaleThreshold().domain(options.legend).range(legendColors);\n\n        return true;\n    }\n\n    /**\n     * Return the classname on the legend for the specified value\n     *\n     * @param integer n Value associated to a date\n     * @param bool withCssClass Whether to display the css class used to style the cell.\n     *                          Disabling will allow styling directly via html fill attribute\n     *\n     * @return string Classname according to the legend\n     */\n    getClass(n, withCssClass) {\n        \"use strict\";\n\n        if (n === null || isNaN(n)) {\n            return \"\";\n        }\n\n        var index = [this.calendar.options.legend.length + 1];\n\n        for (var i = 0, total = this.calendar.options.legend.length - 1; i <= total; i++) {\n\n            if (this.calendar.options.legend[0] > 0 && n < 0) {\n                index = [\"1\", \"i\"];\n                break;\n            }\n\n            if (n <= this.calendar.options.legend[i]) {\n                index = [i + 1];\n                break;\n            }\n        }\n\n        if (n === 0) {\n            index.push(0);\n        }\n\n        index.unshift(\"\");\n        return (index.join(\" r\") + (withCssClass ? index.join(\" q\") : \"\")).trim();\n    }\n}\n\n/**\n * #source http://stackoverflow.com/a/383245/805649\n */\nfunction mergeRecursive(obj1, obj2) {\n    \"use strict\";\n\n    /*jshint forin:false */\n    for (var p in obj2) {\n        try {\n            // Property in destination object set; update its value.\n            if (obj2[p].constructor === Object) {\n                obj1[p] = mergeRecursive(obj1[p], obj2[p]);\n            } else {\n                obj1[p] = obj2[p];\n            }\n        } catch (e) {\n            // Property in destination object not set; create it and set its value.\n            obj1[p] = obj2[p];\n        }\n    }\n\n    return obj1;\n}\n\n/**\n * Check if 2 arrays are equals\n *\n * @link http://stackoverflow.com/a/14853974/805649\n * @param  array array the array to compare to\n * @return bool true of the 2 arrays are equals\n */\nfunction arrayEquals(arrayA, arrayB) {\n    \"use strict\";\n\n    // if the other array is a falsy value, return\n    if (!arrayB || !arrayA) {\n        return false;\n    }\n\n    // compare lengths - can save a lot of time\n    if (arrayA.length !== arrayB.length) {\n        return false;\n    }\n\n    for (var i = 0; i < arrayA.length; i++) {\n        // Check if we have nested arrays\n        if (arrayA[i] instanceof Array && arrayB[i] instanceof Array) {\n            // recurse into the nested arrays\n            if (!arrayEquals(arrayA[i], arrayB[i])) {\n                return false;\n            }\n        } else if (arrayA[i] !== arrayB[i]) {\n            // Warning - two different object instances will never be equal: {x:20} != {x:20}\n            return false;\n        }\n    }\n    return true;\n}\n"],"names":["d3.map","d3.select","d3.event","d3.format","format","d3.timeFormat","d3.timeMinutes","d3.timeHours","d3.timeDays","d3.timeMondays","d3.timeSundays","d3.timeMonths","d3.timeYears","d3.json","d3.csv","d3.tsv","d3.text","map","d3.scaleLinear","d3.interpolateHcl","d3.min","d3.max","d3.scaleThreshold"],"mappings":"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"}